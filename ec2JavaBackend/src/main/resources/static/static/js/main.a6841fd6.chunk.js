(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{302:function(e,t,a){e.exports=a.p+"static/media/Simple Social Network.8d2b3480.svg"},398:function(e,t,a){e.exports=a(642)},403:function(e,t,a){},404:function(e,t,a){},460:function(e,t){},462:function(e,t){},500:function(e,t){},501:function(e,t){},642:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(22),r=a.n(i),s=(a(403),a(8)),c=a(7),l=a(12),u=a(10),p=a(11),d=(a(404),a(153)),m=a(62),g=a(291),h=a(292),f=a(1),E=a(17),v={updatePostTrigger:!1,newsFeedPostLookup:[],newsFeedToken:"0",notificationPostLookup:null},b={accountCreated:!1,isLoggedIn:!1,authToken:null,failureReason:null,activeUser:null,updates:{},notifications:[],notificationsPageToken:"0"},y={displayPage:"login"},O={anchorElement:null,content:{},offset:0,trigger:!1},T={friendRequests:[],requestPageToken:"0",friendsMenuTrigger:!1},k={userSearchResults:[],updates:{}},C={requestedImages:[],requestCounterTrigger:0},w=Object(m.combineReducers)({posts:function(){var e,t,a,n,o,i,r,s,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,l=arguments.length>1?arguments[1]:void 0;switch(l.type){case"FETCH_POST":var u;if(null!==c.notificationPostLookup&&(c[c.notificationPostLookup.userUuid].postObjects.pop(),0===c[c.notificationPostLookup.userUuid].postObjects.length&&(c[c.notificationPostLookup.userUuid]=void 0)),void 0===c[o=l.payload[0].owner])return s=l.payload,Object(E.a)({},c,(u={},Object(f.a)(u,o,Object.assign({},{postObjects:s})),Object(f.a)(u,"notificationPostLookup",{userUuid:o,postKey:s.length-1}),u));var p,d=c[o].postObjects;return s=d.concat(l.payload),Object(E.a)({},c,(p={},Object(f.a)(p,o,Object.assign(c[o],{postObjects:s})),Object(f.a)(p,"notificationPostLookup",{userUuid:o,postKey:s.length-1}),p));case"NAVIGATE_TO":return null!==c.notificationPostLookup&&(c[c.notificationPostLookup.userUuid].postObjects.pop(),0===c[c.notificationPostLookup.userUuid].postObjects.length&&(c[c.notificationPostLookup.userUuid]=void 0)),Object(E.a)({},c,{notificationPostLookup:null});case"FETCH_NEWS_FEED":var m=c,g=[];return l.payload.posts.forEach(function(e){if(o=e.owner,null==m[o])(s=[]).push(e),m[o]={pageToken:e.when,postObjects:s};else{var t=m[o].postObjects;t.push(e),s=t,m[o]=Object.assign(m[o],{pageToken:e.when,postObjects:s})}g.push({userUuid:e.owner,postKey:s.length-1})}),m.newsFeedPostLookup=c.newsFeedPostLookup.concat(g),m.newsFeedToken=l.payload.nextPageToken,Object(E.a)({},c,{updatePostTrigger:!c.updatePostTrigger});case"NEW_POST":if(null==c[o=l.payload.targetUser])s=l.payload.newPost;else{var h=c[o].postObjects;s=l.payload.newPost.concat(h)}return Object(E.a)({},c,Object(f.a)({},o,{pageToken:l.payload.newPost.when,postObjects:s}));case"FETCH_USER_POSTS":if(null==c[o=l.payload.targetUser])s=l.payload.posts;else{var b=c[o].postObjects;s=b.concat(l.payload.posts)}return Object(E.a)({},c,(e={},Object(f.a)(e,o,{pageToken:l.payload.nextPageToken,postObjects:s}),Object(f.a)(e,"updatePostTrigger",!c.updatePostTrigger),e));case"NEW_COMMENT":if(o=l.payload.targetUser,i=l.payload.postKey,null==c[o])r=l.payload.newComment;else{var y=c[o].postObjects[i].comments;r=void 0===y?l.payload.newComment:l.payload.newComment.concat(y)}return(s=c[o].postObjects)[i].comments=r,s[i].numOfComments=s[i].numOfComments+1,Object(E.a)({},c,Object(f.a)({},o,Object.assign(c[o],{postObjects:s})));case"FETCH_POST_COMMENTS":return o=l.payload.targetUser,i=l.payload.postKey,null==c[o]?c:(r=void 0===c[o].postObjects[i].comments?l.payload.comments:c[o].postObjects[i].comments.concat(l.payload.comments),(s=c[o].postObjects)[i].comments=r,s[i].commentPageToken=l.payload.nextPageToken,Object(E.a)({},c,(t={},Object(f.a)(t,o,Object.assign(c[o],{postObjects:s})),Object(f.a)(t,"updatePostTrigger",!c.updatePostTrigger),t)));case"LIKE_POST":return o=l.payload.targetUser,i=l.payload.postKey,(s=c[o].postObjects)[i].liked=!0,s[i].numOfLikes=s[i].numOfLikes+1,Object(E.a)({},c,(a={},Object(f.a)(a,o,Object.assign(c[o],{postObjects:s})),Object(f.a)(a,"updatePostTrigger",!c.updatePostTrigger),a));case"UNLIKE_POST":return o=l.payload.targetUser,i=l.payload.postKey,(s=c[o].postObjects)[i].liked=!1,s[i].numOfLikes=s[i].numOfLikes-1,Object(E.a)({},c,(n={},Object(f.a)(n,o,Object.assign(c[o],{postObjects:s})),Object(f.a)(n,"updatePostTrigger",!c.updatePostTrigger),n));case"LIKE_COMMENT":return o=l.payload.targetUser,i=l.payload.postKey,s=c[o].postObjects,(r=c[o].postObjects[i].comments)[l.payload.commentKey].liked=!0,r[l.payload.commentKey].numOfLikes=r[l.payload.commentKey].numOfLikes+1,Object(E.a)({},c,Object(f.a)({},o,Object.assign(c[o],{postObjects:s})));case"UNLIKE_COMMENT":return o=l.payload.targetUser,i=l.payload.postKey,s=c[o].postObjects,(r=c[o].postObjects[i].comments)[l.payload.commentKey].liked=!1,r[l.payload.commentKey].numOfLikes=r[l.payload.commentKey].numOfLikes-1,Object(E.a)({},c,Object(f.a)({},o,Object.assign(c[o],{postObjects:s})));case"LOGOUT":return v;default:return c}},accountAccess:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_ACCOUNT":return Object(E.a)({},e,{accountCreated:t.payload});case"LOGIN_FAILED":return Object(E.a)({},e,{isLoggedIn:!1,failureReason:t.payload});case"LOGIN":return Object(E.a)({},e,{isLoggedIn:!0,failureReason:null,authToken:t.payload.authToken,activeUser:t.payload.activeUser});case"LOGOUT":return b;case"UPDATE":return e.updates.numOfFriendRequests=t.payload.numOfNewFriendRequests,Object(E.a)({},e,{updates:t.payload});case"FETCH_NOTIFICATIONS":var a=e.notifications.concat(t.payload.notifications);return Object(E.a)({},e,{notifications:a,notificationsPageToken:t.payload.nextPageToken});case"NEW_PROFILE_PIC":var n=e.activeUser;return n.profilePic=t.payload.s3ImgUri,Object(E.a)({},e,{activeUser:Object.assign({},n)});default:return e}},navigation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAVIGATE_TO":return Object(E.a)({},e,{displayPage:t.payload});case"FETCH_POST":return Object(E.a)({},e,{displayPage:"notificationPost"});case"LOGOUT":return y;default:return e}},popout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_POPOUT":return Object(E.a)({},e,{anchorElement:t.payload.anchorEl,content:t.payload.content,offset:t.payload.offset,trigger:!e.trigger});case"LOGOUT":return O;default:return e}},friendAccess:function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case"FETCH_USER_FRIENDS":return t=null==n[e=o.payload.targetUser]?o.payload.friends:n[e].friends.concat(o.payload.friends),Object(E.a)({},n,Object(f.a)({},e,{pageToken:o.payload.nextPageToken,friends:t}));case"FETCH_FRIEND_REQUESTS":return a=n.friendRequests.concat(o.payload.friendRequests),Object(E.a)({},n,{friendRequests:a,requestPageToken:o.payload.nextPageToken});case"RESPOND_TO_REQUEST":a=n.friendRequests;var i=o.payload.requestKey;if(!0===o.payload.accepted){var r;a[i].type="accepted";var s=o.payload.activeUser;if(void 0===n[s])return Object(E.a)({},n,{friendRequests:a,friendsMenuTrigger:!n.friendsMenuTrigger});var c=n[s].friends;return""===n[s].pageToken&&(a[i].since=a[i].when,c.push(a[i])),Object(E.a)({},n,(r={friendRequests:a},Object(f.a)(r,s,{pageToken:"timestamp",friends:c}),Object(f.a)(r,"friendsMenuTrigger",!n.friendsMenuTrigger),r))}return a[i].type="ignored",Object(E.a)({},n,{friendRequests:a,friendsMenuTrigger:!n.friendsMenuTrigger});case"LOGOUT":return T;default:return n}},users:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_SEARCH":return Object(E.a)({},t,{userSearchResults:a.payload});case"FETCH_USER_PROFILE":return Object(E.a)({},t,Object(f.a)({},a.payload.targetUser,a.payload.profileData));case"UPDATE_PROFILE_RELATIONSHIP":return(e=t[a.payload.targetUser]).relationshipStatus=a.payload.newStatus,Object(E.a)({},t,Object(f.a)({},a.payload.targetUser,e));case"NEW_BIO":return(e=t[a.payload.targetUser]).bio=a.payload.newBioContent,Object(E.a)({},t,Object(f.a)({},a.payload.targetUser,e));case"NEW_PROFILE_PIC":return(e=t[a.payload.targetUser]).profilePicUri=a.payload.s3ImgUri,Object(E.a)({},t,Object(f.a)({},a.payload.targetUser,e));case"LOGOUT":return k;default:return t}},images:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"POST_IMAGE":case"FETCH_IMAGE":return Object(E.a)({},t,Object(f.a)({},a.payload.s3ImgUri,a.payload.localImgUrl));case"REQUEST_IMAGE_FETCH":var n=t.requestedImages;return n.push(a.payload),Object(E.a)({},t,{requestedImages:n,requestCounterTrigger:t.requestCounterTrigger+1});case"NEW_PROFILE_PIC":return""===a.payload.currentProfilePicUri?Object(E.a)({},t,Object(f.a)({},a.payload.s3ImgUri,a.payload.localImgUrl)):Object(E.a)({},t,(e={},Object(f.a)(e,a.payload.s3ImgUri,a.payload.localImgUrl),Object(f.a)(e,a.payload.currentProfilePicUri,a.payload.localImgUrl),e));case"LOGOUT":return C;default:return t}}}),j=[h.a],U=Object(g.composeWithDevTools)({}),P=Object(m.createStore)(w,{},U(m.applyMiddleware.apply(void 0,j))),S=P,N=a(18),I=a(29),L=a.n(I),F=a(51),R=a.n(F),x=Object(N.createMuiTheme)({palette:{primary:L.a,secondary:R.a,background:{default:"#eeeeee"}},typography:{useNextVariants:!0}}),B=a(138),A=a.n(B),M=a(19),_=a(9),D=a(293),q=a.n(D),H=a(21),z=a.n(H),K=a(26),W=a(307),G=a(52),V=a(668),J=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={email:"",firstName:"",lastName:"",password:"",password2:"",passLengthError:!1,passMatchError:!1,validEmailError:!1,existingEmailError:!1,firstNameLengthError:!1,lastNameLengthError:!1},a.onChange=a.onChange.bind(Object(_.a)(a)),a.onSubmit=a.onSubmit.bind(Object(_.a)(a)),a.validateEmailSyntax=a.validateEmailSyntax.bind(Object(_.a)(a)),a.checkExistingAccount=a.checkExistingAccount.bind(Object(_.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.checkExistingAccount(this.state.email).then(function(e){t.setState({passLengthError:t.state.password.length<8,passMatchError:t.state.password!==t.state.password2,validEmailError:!t.validateEmailSyntax(t.state.email),existingEmailError:"true"===e,firstNameLengthError:t.state.firstName.length<1,lastNameLengthError:t.state.lastName.length<1},function(){if(!(t.state.validEmailError||t.state.passLengthError||t.state.passMatchError||t.state.existingEmailError)){var e={firstName:t.state.firstName,lastName:t.state.lastName,password:t.state.password,email:t.state.email};t.props.createAccount(e)}})})}},{key:"validateEmailSyntax",value:function(e){return/^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())&&e.length<200}},{key:"checkExistingAccount",value:function(e){var t=new Headers;return t.append("Content-Type","text/plain"),fetch("/checkexistingaccount",{method:"POST",headers:t,body:e}).then(function(e){return e.text()})}},{key:"render",value:function(){var e=this.state,t=this.props.classes;return o.a.createElement(V.a,{container:!0,alignContent:"center",direction:"column"},o.a.createElement(G.a,{className:t.container},o.a.createElement("div",{className:t.title},"Create Account"),o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(Y,{existingEmailError:e.existingEmailError,validEmailError:e.validEmailError,onChange:this.onChange,email:e.email,classes:t})),o.a.createElement("div",{className:t.textFieldContainer},o.a.createElement(Q,{label:"First Name",nameLengthError:e.firstNameLengthError,onChange:this.onChange,nameType:"firstName",nameValue:e.firstName,classes:t})),o.a.createElement("div",{className:t.textFieldContainer},o.a.createElement(Q,{label:"Last Name",nameLengthError:e.lastNameLengthError,onChange:this.onChange,nameType:"lastName",nameValue:e.lastName,classes:t})),o.a.createElement("div",{className:t.textFieldContainer},o.a.createElement($,{passLengthError:e.passLengthError,onChange:this.onChange,password:e.password,classes:t})),o.a.createElement("div",{className:t.textFieldContainer},o.a.createElement(Z,{passMatchError:e.passMatchError,onChange:this.onChange,password:e.password2,classes:t})),o.a.createElement(K.a,{className:t.submitButton,onClick:this.onSubmit},"Submit"))))}}]),t}(n.Component),Y=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes;return e.validEmailError?o.a.createElement("div",null,o.a.createElement(W.a,{name:"email",label:"Email",onChange:e.onChange,value:e.email,error:!0,required:!0,variant:"outlined",helperText:"This must be a valid email",InputProps:{classes:{input:t.textField}}})):e.existingEmailError?o.a.createElement("div",null,o.a.createElement(W.a,{name:"email",label:"Email",onChange:e.onChange,value:e.email,error:!0,required:!0,variant:"outlined",helperText:"This email is already registered. Click the LOGIN button above to login.",InputProps:{classes:{input:t.textField}}})):o.a.createElement("div",null,o.a.createElement(W.a,{name:"email",label:"Email",onChange:e.onChange,value:e.email,error:!1,required:!0,variant:"outlined",helperText:"This must be a valid email",InputProps:{classes:{input:t.textField}}}))}}]),t}(n.Component),Q=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes;return e.nameLengthError?o.a.createElement("div",null,o.a.createElement(W.a,{name:e.nameType,label:e.label,onChange:e.onChange,value:e.nameValue,error:!0,required:!0,variant:"outlined",helperText:"Cannot be empty",InputProps:{classes:{input:t.textField}}})):o.a.createElement("div",null,o.a.createElement(W.a,{name:e.nameType,label:e.label,onChange:e.onChange,value:e.nameValue,error:!1,required:!0,variant:"outlined",InputProps:{classes:{input:t.textField}}}))}}]),t}(n.Component),$=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes;return e.passLengthError?o.a.createElement("div",null,o.a.createElement(W.a,{name:"password",label:"Password",onChange:e.onChange,type:"password",value:e.password,error:!0,required:!0,variant:"outlined",helperText:"Must be at least 8 characters",InputProps:{classes:{input:t.textField}}})):o.a.createElement("div",null,o.a.createElement(W.a,{name:"password",label:"Password",onChange:e.onChange,type:"password",value:e.password,error:!1,required:!0,variant:"outlined",helperText:"Must be at least 8 characters",InputProps:{classes:{input:t.textField}}}))}}]),t}(n.Component),Z=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes;return e.passMatchError?o.a.createElement("div",null,o.a.createElement(W.a,{name:"password2",label:"Confirm Password",onChange:e.onChange,type:"password",value:e.password,error:!0,required:!0,variant:"outlined",helperText:"The passwords must match",InputProps:{classes:{input:t.textField}}})):o.a.createElement("div",null,o.a.createElement(W.a,{name:"password2",label:"Confirm Password",onChange:e.onChange,type:"password",value:e.password,error:!1,required:!0,variant:"outlined",InputProps:{classes:{input:t.textField}}}))}}]),t}(n.Component),X=z()(Object(N.withStyles)(function(e){return{container:{padding:64},title:{fontFamily:"PTSansCaptionBold",fontSize:32,color:e.palette.primary.main},textFieldContainer:{paddingTop:8},textField:{fontFamily:"PTSansCaption",fontSize:16},errorText:{fontFamily:"PTSansCaption",fontSize:16,color:e.palette.error.main},submitButton:{backgroundColor:e.palette.primary.main,color:e.palette.background.default,marginTop:12}}}),Object(M.a)(null,{createAccount:function(e){return function(t){fetch("/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:e.firstName,lastName:e.lastName,password:e.password,email:e.email})}).then(function(e){t({type:"CREATE_ACCOUNT",payload:200===e.status})})}}}))(J),ee=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.onSubmit=function(){var e={email:a.state.email,password:a.state.password};a.props.login(e)},a.state={email:"",password:"",nonExistingEmailError:!1,invalidPasswordError:!1,updateTrigger:!1},a.input=null,a.onChange=a.onChange.bind(Object(_.a)(a)),a.onSubmit=a.onSubmit.bind(Object(_.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.input=document.getElementById("passwordInput"),this.input.addEventListener("keyup",function(t){"Enter"===t.code&&e.onSubmit()})}},{key:"componentWillUnmount",value:function(){var e=this;this.input.removeEventListener("keyup",function(t){"Enter"===t.code&&e.onSubmit()})}},{key:"componentDidUpdate",value:function(e,t,a){e.failureReason===this.props.failureReason&&e.isLoggedIn===this.props.isLoggedIn||this.props.loginSuccessful||("Email not found"===this.props.failureReason?this.setState({nonExistingEmailError:!0,invalidPasswordError:!1}):"Invalid Password"===this.props.failureReason&&this.setState({nonExistingEmailError:!1,invalidPasswordError:!0}))}},{key:"render",value:function(){var e=this.state,t=this.props.classes;return o.a.createElement(V.a,{container:!0,alignContent:"center",direction:"column"},this.props.accountCreated&&o.a.createElement("div",null,o.a.createElement("div",{className:t.title},"Account Created!"),o.a.createElement("div",{className:t.subTitle},"Try logging in")),o.a.createElement(G.a,{className:t.container},o.a.createElement("div",{className:t.title},"Login Page"),o.a.createElement("div",null,o.a.createElement(te,{classes:t,invalidPasswordError:e.invalidPasswordError,nonExistingEmailError:e.nonExistingEmailError}),o.a.createElement("div",null,o.a.createElement(W.a,{name:"email",label:"Email",value:e.email,onChange:this.onChange,className:t.textField,margin:"dense",variant:"outlined",error:e.nonExistingEmailError,InputLabelProps:{shrink:!0},autoFocus:!0,InputProps:{classes:{input:t.textField}}})),o.a.createElement("div",null,o.a.createElement(W.a,{name:"password",label:"Password",value:e.password,onChange:this.onChange,margin:"dense",variant:"outlined",required:!0,type:"password",error:e.invalidPasswordError,id:"passwordInput",InputLabelProps:{shrink:!0},InputProps:{classes:{input:t.textField}}})),o.a.createElement(K.a,{className:t.loginButton,onClick:this.onSubmit},"Login"))))}}]),t}(n.Component),te=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.invalidPasswordError?o.a.createElement("span",{className:this.props.classes.errorText},"The password you entered was incorrect"):this.props.nonExistingEmailError?o.a.createElement("span",{className:this.props.classes.errorText},"An account with this email doesn't exist"):o.a.createElement("span",{className:this.props.classes.textField},"Enter login information here")}}]),t}(n.Component),ae=z()(Object(N.withStyles)(function(e){return{container:{padding:64},title:{fontFamily:"PTSansCaptionBold",fontSize:32,color:e.palette.primary.main},subTitle:{fontFamily:"PTSansCaptionBold",fontSize:24,color:e.palette.primary[300]},textField:{fontFamily:"PTSansCaption",fontSize:16},errorText:{fontFamily:"PTSansCaption",fontSize:16,color:e.palette.error.main},loginButton:{backgroundColor:e.palette.primary.main,color:e.palette.background.default,marginTop:8}}}),Object(M.a)(function(e){return{isLoggedIn:e.accountAccess.isLoggedIn,failureReason:e.accountAccess.failureReason,authenticationHeaders:e.accountAccess.authenticationHeaders,accountCreated:e.accountAccess.accountCreated}},{login:function(e){return function(t){fetch("/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password})}).then(function(e){e.text().then(function(a){switch(e.status){case 200:var n=e.headers.get("Authorization"),o=n.replace("Bearer ",""),i=q.a.decode(o),r=e.headers.get("profilePic");t({type:"LOGIN",payload:{authToken:n,activeUser:{uuid:i.UUID,firstName:i.FIRST_NAME,lastName:i.LAST_NAME,profilePic:r}}});break;case 404:case 401:t({type:"LOGIN_FAILED",payload:a});break;default:t({type:"LOGIN_FAILED",payload:a})}})})}}}))(ee),ne=a(61),oe=function(e,t,a){return function(n){if(""!==a){var o=new Headers;o.append("Authorization",e),o.append("page_token",a),o.append("page_size",10),fetch("/users/"+t+"/friends",{method:"GET",headers:o}).then(function(e){return e.json().then(function(e){var a=e.pop().nextPageToken;n({type:"FETCH_USER_FRIENDS",payload:{targetUser:t,friends:e,nextPageToken:a}})})})}}},ie=function(e,t,a,n,o){return function(i){var r=new Headers;r.append("Authorization",e),r.append("Content-Type","text/plain"),fetch("/users/"+t+"/friend-requests/"+a,{method:"PUT",headers:r,body:n}),"accepted"===n?i(void 0===o?{type:"UPDATE_PROFILE_RELATIONSHIP",payload:{targetUser:a,newStatus:"friends"}}:{type:"RESPOND_TO_REQUEST",payload:{requestKey:o,accepted:!0,activeUser:t}}):"ignored"===n&&i(void 0===o?{type:"UPDATE_PROFILE_RELATIONSHIP",payload:{targetUser:a,newStatus:"ignored"}}:{type:"RESPOND_TO_REQUEST",payload:{requestKey:o,accepted:!1}})}},re=function(e){return function(t){t({type:"NAVIGATE_TO",payload:e})}},se=function(e,t,a){return function(n){n({type:"OPEN_POPOUT",payload:{anchorEl:e,content:t,offset:a||0}})}},ce=a(13),le=a.n(ce),ue=a(82),pe=a.n(ue),de=a(60),me=a.n(de),ge=a(133),he=a.n(ge),fe=a(134),Ee=a.n(fe),ve=a(47),be=a.n(ve),ye=a(148),Oe=a.n(ye),Te=a(149),ke=a.n(Te),Ce=a(200),we=a.n(Ce),je=a(81),Ue=a.n(je),Pe=a(308),Se=a(109),Ne=a(297),Ie=a.n(Ne),Le=function(e,t,a){return function(n){if(void 0!==e){var o=new Headers;o.append("Authorization",t),o.append("type",a),fetch("/images/"+e,{method:"GET",headers:o}).then(function(t){t.blob().then(function(t){var a=window.URL.createObjectURL(t);n({type:"FETCH_IMAGE",payload:{s3ImgUri:e,localImgUrl:a}})})})}}},Fe=a(92),Re=a(56),xe=a.n(Re),Be=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={localImgUrl:""},a.displayAvatar=null,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;void 0!==e.s3ImageUri&&""!==e.s3ImageUri&&(void 0===e.imageRepo[e.s3ImageUri]?e.requestImageFetch(e.s3ImageUri,"post"):this.setState({localImgUrl:e.imageRepo[e.s3ImageUri]}))}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.props;void 0!==n.imageRepo[n.s3ImageUri]?n.imageRepo[n.s3ImageUri]!==e.imageRepo[e.s3ImageUri]&&this.setState({localImgUrl:n.imageRepo[n.s3ImageUri]}):""===n.s3ImageUri&&n.s3ImageUri!==e.s3ImageUri&&this.setState({localImgUrl:""})}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=this.props,n=e.avatar;return void 0!==a.styleOverride&&(n=a.styleOverride),""===t.localImgUrl?void 0!==a.noPicOverrideMessage?this.displayAvatar=o.a.createElement(Fe.a,{className:e.avatarButton},o.a.createElement(xe.a,{className:n},a.noPicOverrideMessage)):this.displayAvatar=o.a.createElement(Fe.a,{className:e.avatarButton},o.a.createElement(xe.a,{className:n},a.userFirstName.charAt(0).toUpperCase())):this.displayAvatar=o.a.createElement(Fe.a,{className:e.avatarButton},o.a.createElement(xe.a,{src:t.localImgUrl,className:n})),void 0!==a.noButton&&a.noButton&&(""===t.localImgUrl?this.displayAvatar=o.a.createElement(xe.a,{className:n},a.userFirstName.charAt(0).toUpperCase()):this.displayAvatar=o.a.createElement(xe.a,{src:t.localImgUrl,className:n})),void 0===a.clickable||a.clickable?void 0===a.userUuid?o.a.createElement("div",null,this.displayAvatar):o.a.createElement("div",{onClick:function(){return a.navigateTo(a.userUuid)}},this.displayAvatar):o.a.createElement("div",null,this.displayAvatar)}}]),t}(n.Component),Ae=z()(Object(N.withStyles)(function(e){return{avatar:{color:e.palette.secondary.main,backgroundColor:e.palette.primary.main},avatarButton:{padding:0}}}),Object(M.a)(function(e){return{imageRepo:e.images,authToken:e.accountAccess.authToken}},{requestImageFetch:function(e,t){return function(a){a({type:"REQUEST_IMAGE_FETCH",payload:{uri:e,type:t}})}},navigateTo:re}))(Be),Me=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={text:""},a.onChange=a.onChange.bind(Object(_.a)(a)),a.onSubmit=a.onSubmit.bind(Object(_.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault(),this.state.text.length<1||(this.props.createComment(this.state.text,this.props.authToken,this.props.postOwnerUuid,this.props.postUuid,this.props.postKey),this.setState({text:""}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=o.a.createElement(Ae,{s3ImageUri:e.activeUser.profilePic,userUuid:e.activeUser.uuid,userFirstName:e.activeUser.firstName,styleOverride:t.avatar}),n=o.a.createElement("div",{className:t.textInnerContainer,ref:this.setTextFieldRef},o.a.createElement(Pe.a,{className:t.textField,placeholder:"Thoughts?",multiline:!0,fullWidth:!0,autoComplete:"off",rowsMax:4,name:"text",onChange:this.onChange,value:this.state.text}));return o.a.createElement("div",null,o.a.createElement(le.a,{container:!0,direction:"row",justify:"flex-start"},o.a.createElement(le.a,{item:!0},a),o.a.createElement(le.a,{item:!0,xs:!0,className:t.textContainer},n),o.a.createElement(le.a,{item:!0},o.a.createElement(Se.a,{onClick:this.onSubmit,className:t.sendButton},o.a.createElement(Ie.a,{className:t.sendIcon})))))}}]),t}(n.Component),_e=z()(Object(N.withStyles)(function(e){return{avatar:{color:R.a[500],backgroundColor:L.a[500],maxWidth:32,maxHeight:32},textField:{fontFamily:"PTSansCaptionRegular",fontSize:12,padding:8},textInnerContainer:{borderRadius:25,backgroundColor:L.a[300],paddingLeft:4,paddingRight:4,paddingTop:1,paddingBottom:1},textContainer:{paddingLeft:4,paddingRight:4},sendIcon:{color:L.a[500],minHeight:26,minWidth:26,marginLeft:4},sendButton:{height:32,width:48,padding:0,borderRadius:25}}}),Object(M.a)(function(e){return{activeUser:e.accountAccess.activeUser,authToken:e.accountAccess.authToken}},{createComment:function(e,t,a,n,o){return function(i){var r=new Headers;r.append("Authorization",t),r.append("Content-Type","text/plain"),fetch("/users/"+a+"/posts/"+n+"/comments",{method:"POST",headers:r,body:e}).then(function(e){e.json().then(function(e){i({type:"NEW_COMMENT",payload:{targetUser:a,postKey:o,newComment:e}})})})}}}))(Me),De=a(73),qe=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateCommentState=function(){var e=a.props,t=!1;void 0!==e.comment.liked&&null!=e.comment.liked&&(t=e.comment.liked);var n,o=Date.now()-e.comment.when;if(o<18e4)n="Just now";else if(o<3.6*Math.pow(10,6)){n=Math.floor(o/6e4).toString()+" min ago"}else if(o<8.64*Math.pow(10,7)){n=Math.floor(o/(3.6*Math.pow(10,6))).toString()+" hrs ago"}else n=o<1.728*Math.pow(10,8)?"Yesterday":new Date(e.comment.when).toString();a.setState({activeUserLiked:t,whenPosted:n,numOfLikes:e.comment.numOfLikes})};var n=!1;void 0!==e.comment.liked&&null!=e.comment.liked&&(n=e.comment.liked);var o,i=Date.now()-e.comment.when;if(i<18e4)o="Just now";else if(i<3.6*Math.pow(10,6)){o=Math.floor(i/6e4).toString()+" min ago"}else if(i<8.64*Math.pow(10,7)){o=Math.floor(i/(3.6*Math.pow(10,6))).toString()+" hrs ago"}else o=i<1.728*Math.pow(10,8)?"Yesterday":new Date(e.comment.when).toString();return a.state={activeUserLiked:n,whenPosted:o,numOfLikes:e.comment.numOfLikes},a.updateCommentState=a.updateCommentState.bind(Object(_.a)(a)),a.toggleLike=a.toggleLike.bind(Object(_.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){this.props.comment!==e.comment&&this.updateCommentState()}},{key:"toggleLike",value:function(){var e=this.state,t=this.props;e.activeUserLiked?(this.setState({activeUserLiked:!1,numOfLikes:e.numOfLikes-1}),t.unlikeComment(t.postOwner,t.postUuid,t.comment.commentUuid,t.authToken,t.postKey,t.commentKey)):(this.setState({activeUserLiked:!0,numOfLikes:e.numOfLikes+1}),t.likeComment(t.postOwner,t.postUuid,t.comment.commentUuid,t.authToken,t.postKey,t.commentKey))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.comment,n=this.state,i=o.a.createElement(Ae,{s3ImageUri:a.posterProfilePicUri,userFirstName:a.firstName,userUuid:a.userUuid,styleOverride:t.avatar}),r=o.a.createElement(o.a.Fragment,null,o.a.createElement(be.a,{onClick:this.toggleLike,className:t.likeButton,color:"primary"},this.state.activeUserLiked?o.a.createElement(De.a,{badgeContent:n.numOfLikes,color:"secondary"},o.a.createElement(Ue.a,{in:this.state.activeUserLiked},o.a.createElement(Oe.a,null))):o.a.createElement(De.a,{badgeContent:n.numOfLikes,color:"secondary"},o.a.createElement(ke.a,null)))),s=o.a.createElement("div",{className:t.textInnerContainer},o.a.createElement(le.a,{container:!0,direction:"column",alignContent:"flex-start",justify:"flex-start"},o.a.createElement("span",null,o.a.createElement("span",{onClick:function(){return e.navigateTo(a.userUuid)},className:t.commentTitle},a.firstName.charAt(0).toUpperCase()+a.firstName.substring(1)),o.a.createElement("span",{className:t.text},a.text))));return o.a.createElement("div",null,o.a.createElement(le.a,{container:!0,direction:"row",justify:"flex-start",alignContent:"flex-start"},o.a.createElement(le.a,{item:!0},i),o.a.createElement(le.a,{item:!0,xs:!0,className:t.textContainer},s),o.a.createElement(le.a,{item:!0},r)))}}]),t}(n.Component),He=z()(Object(N.withStyles)(function(e){return{avatar:{color:e.palette.secondary.main,backgroundColor:e.palette.primary.main,maxWidth:32,maxHeight:32},commentTitle:{cursor:"pointer",paddingRight:4,fontFamily:"PTSansCaptionBold",fontSize:14,color:e.palette.primary.main},text:{fontFamily:"PTSansRegular",fontSize:14},textInnerContainer:{borderRadius:25,backgroundColor:e.palette.primary[300],paddingLeft:12,paddingRight:12,paddingTop:4,paddingBottom:6,minHeight:32},textContainer:{paddingLeft:4,paddingRight:4},likeButton:{padding:4,background:"transparent"}}}),Object(M.a)(function(e){return{authToken:e.accountAccess.authToken}},{navigateTo:re,likeComment:function(e,t,a,n,o,i){return function(r){var s=new Headers;s.append("Authorization",n),fetch("/users/"+e+"/posts/"+t+"/comments/"+a+"/likes",{method:"POST",headers:s}).then(function(t){200===t.status&&r({type:"LIKE_COMMENT",payload:{targetUser:e,postKey:o,commentKey:i}})})}},unlikeComment:function(e,t,a,n,o,i){return function(r){var s=new Headers;s.append("Authorization",n),fetch("/users/"+e+"/posts/"+t+"/comments/"+a+"/likes",{method:"DELETE",headers:s}).then(function(t){200===t.status&&r({type:"UNLIKE_COMMENT",payload:{targetUser:e,postKey:o,commentKey:i}})})}}}))(qe),ze=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).updatePostState=function(){var e=a.props,t=!1;null!=e.post.liked&&(t=e.post.liked);var n,o=Date.now()-e.post.when;if(o<18e4)n="Just now";else if(o<3.6*Math.pow(10,6)){n=Math.floor(o/6e4).toString()+" min ago"}else if(o<8.64*Math.pow(10,7)){n=Math.floor(o/(3.6*Math.pow(10,6))).toString()+" hrs ago"}else n=o<1.728*Math.pow(10,8)?"Yesterday":new Date(e.post.when).toDateString();var i=0;void 0!==e.post.numOfLikes&&(i=e.post.numOfLikes);var r=0;void 0!==e.post.numOfComments&&(r=e.post.numOfComments);var s="0";void 0!==e.post.commentPageToken&&(s=e.post.commentPageToken);var c=null;""!==e.post.s3ImgUri&&(void 0===e.imageRepo[e.post.s3ImgUri]?e.fetchImage(e.post.s3ImgUri,e.authToken,"post"):c=e.imageRepo[e.post.s3ImgUri]),a.setState({activeUserLiked:t,whenPosted:n,numOfLikes:i,numOfComments:r,commentPageToken:s,showComments:a.commentFetching,localImgUrl:c},function(){a.commentFetching=!1})},a.toggleLike=function(){var e=a.props,t=e.post;a.state.activeUserLiked?(a.setState({activeUserLiked:!1,numOfLikes:a.state.numOfLikes-1}),e.unlikePost(e.owner,t.postUuid,e.authToken,e.postKey)):(a.setState({activeUserLiked:!0,numOfLikes:a.state.numOfLikes+1}),e.likePost(e.owner,t.postUuid,e.authToken,e.postKey))},a.toggleCommentsSection=function(){a.state.numOfComments>0&&"0"===a.state.commentPageToken?a.fetchComments():a.setState({showComments:!a.state.showComments})},a.fetchComments=function(){""!==a.state.commentPageToken&&(a.commentFetching=!0,a.props.fetchPostComments(a.props.authToken,a.props.owner,a.props.post.postUuid,a.props.postKey,a.state.commentPageToken))};var n=!1;null!=e.post.liked&&(n=e.post.liked);var o,i=Date.now()-e.post.when;if(i<18e4)o="Just now";else if(i<3.6*Math.pow(10,6)){o=Math.floor(i/6e4).toString()+" min ago"}else if(i<8.64*Math.pow(10,7)){o=Math.floor(i/(3.6*Math.pow(10,6))).toString()+" hrs ago"}else o=i<1.728*Math.pow(10,8)?"Yesterday":new Date(e.post.when).toDateString();var r=0;void 0!==e.post.numOfLikes&&(r=e.post.numOfLikes);var c=0;void 0!==e.post.numOfComments&&(c=e.post.numOfComments);var p="0";return void 0!==e.post.commentPageToken&&(p=e.post.commentPageToken),a.state={activeUserLiked:n,whenPosted:o,numOfLikes:r,numOfComments:c,commentPageToken:p,showComments:!1,localImgUrl:null},a.commentFetching=!1,a.toggleLike=a.toggleLike.bind(Object(_.a)(a)),a.fetchComments=a.fetchComments.bind(Object(_.a)(a)),a.updatePostState=a.updatePostState.bind(Object(_.a)(a)),a.toggleCommentsSection=a.toggleCommentsSection.bind(Object(_.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;""!==e.post.s3ImgUri&&(void 0===e.imageRepo[e.post.s3ImgUri]?e.fetchImage(e.post.s3ImgUri,e.authToken,"post"):this.setState({localImgUrl:e.imageRepo[e.post.s3ImgUri]}))}},{key:"componentDidUpdate",value:function(e,t,a){this.props.imageRepo[this.props.post.s3ImgUri]!==e.imageRepo[e.post.s3ImgUri]&&this.setState({localImgUrl:this.props.imageRepo[this.props.post.s3ImgUri]}),this.props.comments!==e.comments&&this.setState({numOfLikes:this.props.post.numOfLikes,commentPageToken:this.props.post.commentPageToken,numOfComments:this.props.post.numOfComments}),this.props.owner!==e.owner&&this.setState({numOfLikes:this.props.post.numOfLikes,numOfComments:this.props.post.numOfComments}),this.props.post!==e.post&&this.updatePostState(),this.props.updatePostTrigger!==e.updatePostTrigger&&this.updatePostState()}},{key:"render",value:function(){var e=this.props,t=this.state,a=this.props.classes,n=o.a.createElement(Ae,{s3ImageUri:e.post.posterProfilePicUri,userFirstName:e.post.firstName,userUuid:e.post.userUuid}),i=o.a.createElement("div",{onClick:function(){e.navigateTo(e.post.userUuid)},className:a.postTitle},e.post.firstName.charAt(0).toUpperCase()+e.post.firstName.substring(1));e.post.owner!==e.post.userUuid&&(i=o.a.createElement("div",null,o.a.createElement("span",{onClick:function(){e.navigateTo(e.post.userUuid)},className:a.postTitle},e.post.firstName.charAt(0).toUpperCase()+e.post.firstName.substring(1)),o.a.createElement("span",null," posted on "),o.a.createElement("span",{onClick:function(){e.navigateTo(e.post.owner)},className:a.postTitle},e.post.ownerFirstName.charAt(0).toUpperCase()+e.post.ownerFirstName.substring(1)+"'s"),o.a.createElement("span",null," profile")));var r=o.a.createElement("div",{className:a.textSubheaderFont},t.whenPosted),s=o.a.createElement(o.a.Fragment,null,o.a.createElement(be.a,{onClick:this.toggleLike,className:a.actionButton,color:"primary"},t.activeUserLiked?o.a.createElement(De.a,{badgeContent:t.numOfLikes,color:"secondary"},o.a.createElement(Ue.a,{in:t.activeUserLiked},o.a.createElement(Oe.a,null))):o.a.createElement(De.a,{badgeContent:t.numOfLikes,color:"secondary"},o.a.createElement(ke.a,null)))),c=o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:a.textBodyFont},e.post.text)),l=null;null!==t.localImgUrl&&(l=o.a.createElement("div",null,o.a.createElement("div",{style:{height:4}}),o.a.createElement("img",{alt:"",src:t.localImgUrl}),o.a.createElement("div",{style:{height:4}})));var u=o.a.createElement(o.a.Fragment,null,o.a.createElement(be.a,{onClick:this.toggleCommentsSection,className:a.actionButton,color:"primary"},o.a.createElement(De.a,{badgeContent:t.numOfComments,color:"secondary"},o.a.createElement(we.a,null)))),p=o.a.createElement(o.a.Fragment,null,o.a.createElement(G.a,{"data-simplebar":!0,className:a.commentsContainer},o.a.createElement(le.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch"},o.a.createElement(le.a,{item:!0},o.a.createElement(_e,{postUuid:e.post.postUuid,postKey:e.postKey,postOwnerUuid:e.owner})),void 0!==e.comments&&o.a.createElement(o.a.Fragment,null,e.comments.length>0&&o.a.createElement(o.a.Fragment,null,e.comments.map(function(n,i){return o.a.createElement("div",{key:i},t.showComments&&o.a.createElement(le.a,{className:a.commentSectionItem,key:i,item:!0},o.a.createElement(He,{comment:n,postOwner:e.owner,postUuid:e.post.postUuid,postKey:e.postKey,commentKey:i})))})),this.state.numOfComments===e.comments.length?o.a.createElement("div",{style:{height:7}}):o.a.createElement(o.a.Fragment,null,o.a.createElement(le.a,{item:!0,container:!0,direction:"row",justify:"center",className:a.moreCommentsButton,onClick:this.fetchComments},o.a.createElement(we.a,{className:a.commentsIcon}),"Load More Comments"))),void 0===e.comments&&o.a.createElement("div",{style:{height:7}}))));return o.a.createElement("div",{className:a.postContainer},o.a.createElement("div",{className:a.innerContainer},o.a.createElement(pe.a,null,o.a.createElement(me.a,{className:a.postHeader,avatar:n,title:i,subheader:r}),o.a.createElement(he.a,{className:a.postBody},o.a.createElement("div",null,c)),l,o.a.createElement(Ee.a,{className:a.postFooter},o.a.createElement("div",{className:a.sideIconSpace}),s,o.a.createElement("div",{className:a.middleIconSpace}),u,o.a.createElement("div",{className:a.sideIconSpace})))),o.a.createElement("div",{className:a.commentsSection},p))}}]),t}(n.Component),Ke=z()(Object(N.withStyles)(function(e){return{postContainer:{width:500,paddingTop:0,paddingBottom:0},postTitle:{cursor:"pointer",paddingTop:0,marginBottom:-10,fontFamily:"PTSansCaptionBold",fontSize:18,color:L.a[500]},postHeader:{marginTop:0,paddingBottom:0},postBody:{paddingTop:4,paddingBottom:4},postFooter:{paddingBottom:8,paddingLeft:16,paddingRight:16,paddingTop:0},postOptions:{padding:4,background:"transparent"},avatar:{color:R.a[500],backgroundColor:L.a[500]},avatarButton:{padding:0},actionButton:{padding:8,background:"transparent"},middleIconSpace:{flexGrow:1,minWidth:100},sideIconSpace:{width:100},textBodyFont:{fontFamily:"PTSansCaptionRegular",fontSize:16},textSubheaderFont:{fontFamily:"PTSanseCaptionRegular",fontSize:14,paddingTop:4},innerContainer:{zIndex:10,position:"relative"},commentsContainer:{backgroundColor:e.palette.primary[50],paddingTop:16,paddingLeft:12,paddingRight:12,paddingBottom:0,width:500,maxHeight:350},commentsSection:{zIndex:0,position:"relative",bottom:8},commentSectionItem:{paddingTop:4,paddingBottom:0},shareIcon:{marginRight:4},moreCommentsButton:{cursor:"pointer",fontFamily:"PTSansCaptionBold",fontSize:14,color:L.a[500],paddingTop:4,paddingBottom:4},commentsIcon:{maxWidth:20,maxHeight:20}}}),Object(M.a)(function(e){return{authToken:e.accountAccess.authToken,activeUser:e.accountAccess.activeUser,updatePostTrigger:e.posts.updatePostTrigger,imageRepo:e.images}},{fetchPostComments:function(e,t,a,n,o){return function(i){var r=new Headers;r.append("Authorization",e),r.append("page_token",o),r.append("page_size",10),fetch("/users/"+t+"/posts/"+a+"/comments",{method:"GET",headers:r}).then(function(e){e.json().then(function(e){var a=e.pop().nextPageToken;i({type:"FETCH_POST_COMMENTS",payload:{targetUser:t,postKey:n,comments:e,nextPageToken:a}})})})}},likePost:function(e,t,a,n){return function(o){var i=new Headers;i.append("Authorization",a),fetch("/users/"+e+"/posts/"+t+"/likes",{method:"POST",headers:i}).then(function(t){200===t.status&&o({type:"LIKE_POST",payload:{targetUser:e,postKey:n}})})}},unlikePost:function(e,t,a,n){return function(o){var i=new Headers;i.append("Authorization",a),fetch("/users/"+e+"/posts/"+t+"/likes",{method:"DELETE",headers:i}).then(function(t){200===t.status&&o({type:"UNLIKE_POST",payload:{targetUser:e,postKey:n}})})}},navigateTo:re,fetchImage:Le}))(ze),We=a(202),Ge=a(208),Ve=a(201),Je=a.n(Ve),Ye=a(91),Qe=a(88),$e=a(89),Ze=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).setTextFieldRef=function(e){a.setState({textFieldRef:e})},a.setFormRef=function(e){a.setState({formRef:e})},a.startClickListening=function(){document.addEventListener("mouseup",a.handleClick,!1)},a.stopClickListening=function(){document.removeEventListener("mouseup",a.handleClick,!1)},a.handleClick=function(e){null==a.state.textFieldRef||a.state.openEditImageDialog||(a.state.textFieldRef.contains(e.target)?a.enableEditing():a.state.formRef.contains(e.target)||a.disableEditing())},a.enableEditing=function(){a.setState({editMode:!0})},a.disableEditing=function(){a.setState({editMode:!1})},a.openImageDialog=function(){a.setState({openEditImageDialog:!0})},a.closeImageDialog=function(){a.setState({openEditImageDialog:!1})},a.removeImage=function(){a.setState({imageFile:null,imagePreviewUrl:"",openEditImageDialog:!1})},a.state={text:"",textFieldRef:null,formRef:null,editMode:!1,showFriends:!0,showEveryone:!1,disableShareToEveryone:!1,imageFile:null,imagePreviewUrl:"",openEditImageDialog:!1},a.onChange=a.onChange.bind(Object(_.a)(a)),a.onSubmit=a.onSubmit.bind(Object(_.a)(a)),a.switchChange=a.switchChange.bind(Object(_.a)(a)),a.startClickListening=a.startClickListening.bind(Object(_.a)(a)),a.stopClickListening=a.stopClickListening.bind(Object(_.a)(a)),a.handleClick=a.handleClick.bind(Object(_.a)(a)),a.enableEditing=a.enableEditing.bind(Object(_.a)(a)),a.disableEditing=a.disableEditing.bind(Object(_.a)(a)),a.openImageDialog=a.openImageDialog.bind(Object(_.a)(a)),a.closeImageDialog=a.closeImageDialog.bind(Object(_.a)(a)),a.removeImage=a.removeImage.bind(Object(_.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.startClickListening()}},{key:"componentWillUnmount",value:function(){this.stopClickListening()}},{key:"onChange",value:function(e){"postImage"===e.target.name?e.target.files.length>0&&this.setState({imageFile:e.target.files[0],imagePreviewUrl:URL.createObjectURL(e.target.files[0])}):this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t={text:this.state.text,showFriends:this.state.showFriends,showEveryone:this.state.showEveryone};this.props.createPost(t,this.state.imageFile,this.props.authToken,this.props.targetUser),this.setState({text:"",imageFile:null,imagePreviewUrl:"",editMode:!1})}},{key:"switchChange",value:function(e){var t=this;this.setState(Object(f.a)({},e.target.name,e.target.checked),function(){t.state.showFriends?t.setState({disableShareToEveryone:!1}):t.setState({showEveryone:!1,disableShareToEveryone:!0})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=this.state,i=o.a.createElement(Ae,{s3ImageUri:t.activeUser.profilePic,userUuid:t.activeUser.uuid,userFirstName:t.activeUser.firstName}),r=o.a.createElement("div",{ref:this.setTextFieldRef},o.a.createElement(Pe.a,{className:a.textField,placeholder:"What's up?",multiline:!0,fullWidth:!0,autoComplete:"off",rowsMax:6,name:"text",onChange:this.onChange,value:this.state.text})),s=o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{style:{display:"none"},type:"file",name:"postImage",accept:".jpg, .jpeg, .png",onChange:this.onChange,ref:function(t){return e.fileInput=t}}),o.a.createElement(Fe.a,{onClick:function(){return e.fileInput.click()},className:a.addPhotoSmallButton,color:"primary"},o.a.createElement(Je.a,null))),c=null;n.editMode&&(c=""===n.imagePreviewUrl?o.a.createElement("div",null,o.a.createElement("input",{style:{display:"none"},type:"file",name:"postImage",accept:".jpg, .jpeg, .png",onChange:this.onChange,ref:function(t){return e.fileInput=t}}),o.a.createElement(We.a,{onClick:function(){return e.fileInput.click()},className:a.addPhotoArea},o.a.createElement(le.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},o.a.createElement(le.a,{item:!0},o.a.createElement(Je.a,{color:"primary"})),o.a.createElement(le.a,{item:!0},o.a.createElement("span",{className:a.addPhotoText},"Add Image"))))):o.a.createElement(K.a,{style:{padding:0},onClick:this.openImageDialog},o.a.createElement("img",{alt:"",src:n.imagePreviewUrl})));var l=o.a.createElement("div",null);return t.targetUser===t.activeUser.uuid&&(l=o.a.createElement(o.a.Fragment,null,o.a.createElement(le.a,{style:{maxWidth:250,paddingTop:8},spacing:0,item:!0,container:!0,direction:"column",justify:"center",alignItems:"center"},o.a.createElement(le.a,{item:!0},o.a.createElement("span",{className:a.privacyLabel},"Who should see this?")),o.a.createElement(le.a,{item:!0,container:!0,direction:"row",justify:"flex-end",alignItems:"center"},o.a.createElement(le.a,{item:!0},o.a.createElement("span",{className:a.switchLabelText},"Friends"),o.a.createElement(Ge.a,{checked:this.state.showFriends,onChange:this.switchChange,name:"showFriends",color:"primary",style:{maxHeight:20}})),o.a.createElement(le.a,{item:!0},this.state.disableShareToEveryone?o.a.createElement("span",{className:a.switchLabelTextDisabled},"Everyone"):o.a.createElement("span",{className:a.switchLabelText},"Everyone"),o.a.createElement(Ge.a,{onChange:this.switchChange,name:"showEveryone",checked:this.state.showEveryone,color:"primary",disabled:this.state.disableShareToEveryone,style:{maxHeight:20}})))))),o.a.createElement("div",{className:a.formContainer,ref:this.setFormRef},o.a.createElement(pe.a,null,this.state.editMode&&o.a.createElement(le.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},o.a.createElement(le.a,{item:!0,className:a.avatarContainerEditing},i),o.a.createElement(le.a,{item:!0,className:a.headerTitle},"New Post"),o.a.createElement(le.a,{xs:!0,item:!0}),l),o.a.createElement(le.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},!this.state.editMode&&o.a.createElement(le.a,{item:!0,className:a.avatarContainerDefault},i),o.a.createElement(le.a,{item:!0,xs:!0,className:a.textFieldContainer},r),!this.state.editMode&&o.a.createElement(le.a,{item:!0,container:!0,className:a.addPhotoIcon,direction:"row",justify:"flex-end",alignItems:"center"},o.a.createElement(le.a,{item:!0},s))),c,this.state.editMode&&o.a.createElement(We.a,{onClick:this.onSubmit},o.a.createElement(le.a,{item:!0,container:!0,className:a.submitButton,direction:"row",justify:"center",alignItems:"center"},o.a.createElement(le.a,{item:!0},"Submit New Post")))),o.a.createElement(Qe.a,{open:n.openEditImageDialog,onClose:this.closeImageDialog},o.a.createElement($e.a,null,"Remove Image?"),o.a.createElement(K.a,{onClick:this.removeImage},"Yes"),o.a.createElement(K.a,{onClick:this.closeImageDialog,color:"primary"},"No")))}}]),t}(n.Component),Xe=z()(Object(N.withStyles)(function(e){return{avatar:{color:R.a[500],backgroundColor:L.a[500]},avatarContainerDefault:{paddingTop:16,paddingLeft:16,paddingRight:0,paddingBottom:16,marginRight:-8},avatarContainerEditing:{paddingTop:16,paddingLeft:16,paddingRight:8,paddingBottom:0},formContainer:{width:500,paddingTop:4,paddingBottom:8},formCard:{padding:16},formHeader:{paddingTop:16,paddingLeft:16,paddingRight:16,paddingBottom:4},headerTitle:{cursor:"pointer",paddingTop:0,marginBottom:-10,fontFamily:"PTSansCaptionBold",fontSize:18,color:L.a[500]},textField:{fontFamily:"PTSansCaptionRegular",fontSize:16},textFieldContainer:{paddingLeft:16,paddingRight:16,paddingBottom:4,paddingTop:4},addPhotoIcon:{paddingBottom:16,paddingRight:16,paddingLeft:0,paddingTop:16,maxWidth:40},addPhotoSmallButton:{padding:8},addPhotoText:{fontFamily:"PTSansCaptionBold",fontSize:14,color:L.a[500]},addPhotoArea:{paddingLeft:16,paddingRight:16,paddingTop:4,paddingBottom:4},submitButton:{paddingLeft:16,paddingRight:16,paddingBottom:8,paddingTop:8,fontFamily:"PTSansCaptionBold",fontSize:16,backgroundColor:L.a[500],color:R.a[500]},switchLabelText:{fontFamily:"PTSansBold",fontSize:14,color:L.a[500]},switchLabelTextDisabled:{fontFamily:"PTSansBold",fontSize:14,color:Ye.a[500]},privacyLabel:{fontFamily:"PTSansCaptionRegular",fontSize:14,color:L.a[500]}}}),Object(M.a)(function(e){return{activeUser:e.accountAccess.activeUser,authToken:e.accountAccess.authToken}},{createPost:function(e,t,a,n){return function(o){var i=new Headers;i.append("Authorization",a);var r=new FormData;r.append("text",e.text),r.append("image",t),e.showEveryone?r.append("privacyKey",2):e.showFriends?r.append("privacyKey",1):r.append("privacyKey",0),fetch("/users/"+n+"/posts",{method:"POST",body:r,headers:i}).then(function(e){e.json().then(function(e){o({type:"NEW_POST",payload:{newPost:e,targetUser:n}})})})}}}))(Ze),et=a(300),tt=a(150),at=a(301),nt=a(207),ot=a.n(nt),it=a(93),rt=a.n(it),st=a(155),ct=a(90),lt=(a(178),a(188),a(50)),ut=a.n(lt),pt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).setButtonRef=function(e){a.setState({buttonRef:e})},a.handleClick=function(e){var t=a.props.userObject.userUuid;null!==a.state.buttonRef&&a.state.buttonRef.contains(e.target)||a.props.navigateTo(t)},a.state={buttonRef:null},a.setButtonRef=a.setButtonRef.bind(Object(_.a)(a)),a.handleClick=a.handleClick.bind(Object(_.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props.classes,n=this.props.userObject,i=o.a.createElement(Ae,{s3ImageUri:n.profilePicUri,userUuid:n.userUuid,userFirstName:n.firstName}),r=o.a.createElement("div",{className:a.title},n.firstName.charAt(0).toUpperCase()+n.firstName.substring(1)+" "+n.lastName.charAt(0).toUpperCase()+n.lastName.substring(1)),s=null;switch(s="friend"!==this.props.type?o.a.createElement("div",{className:a.subheader},n.numOfMutualFriends+" mutual friends"):o.a.createElement("div",{className:a.subheader},"Friends since "+new Date(n.since).toDateString()),this.props.type){case"request":e=o.a.createElement("div",{className:a.actionsContainer},o.a.createElement("span",{ref:this.setButtonRef},o.a.createElement(K.a,{onClick:function(){return t.props.respondToRequest(t.props.authToken,t.props.activeUserUuid,n.userUuid,"accepted",t.props.requestKey)},className:a.acceptButton,color:"primary",variant:"contained"},"Accept"),o.a.createElement(K.a,{onClick:function(){return t.props.respondToRequest(t.props.authToken,t.props.activeUserUuid,n.userUuid,"ignored",t.props.requestKey)},className:a.ignoreButton,variant:"contained"},"Ignore")));break;case"accepted":e=o.a.createElement("div",{className:a.actionsContainer},o.a.createElement(K.a,{className:a.acceptButton,disabled:!0,color:"primary",variant:"contained"},"Accepted"));break;case"ignored":e=o.a.createElement("div",{className:a.actionsContainer},o.a.createElement(K.a,{className:a.ignoreButton,disabled:!0,variant:"contained"},"Ignored"));break;default:e=null}return o.a.createElement(o.a.Fragment,null,o.a.createElement(me.a,{onClick:function(e){return t.handleClick(e)},className:a.mainContainer,avatar:i,title:r,subheader:s,action:e}))}}]),t}(n.Component),dt=z()(Object(N.withStyles)(function(e){return{mainContainer:{padding:0,width:400},title:{cursor:"pointer",paddingTop:0,marginBottom:-4,fontFamily:"PTSansCaptionBold",fontSize:16,color:L.a[500]},subheader:{fontFamily:"PTSanseCaptionRegular",fontSize:16,marginTop:-6},avatar:{color:e.palette.secondary.main,backgroundColor:e.palette.primary.main,marginRight:-8},acceptButton:{color:e.palette.secondary.main,paddingTop:4,paddingBottom:4,paddingLeft:8,paddingRight:8,textTransform:"none"},ignoreButton:{paddingTop:4,paddingBottom:4,paddingLeft:8,paddingRight:8,textTransform:"none",backgroundColor:e.palette.grey[300],color:e.palette.grey.A400},actionsContainer:{marginTop:12}}}),Object(M.a)(function(e){return{authToken:e.accountAccess.authToken,activeUserUuid:e.accountAccess.activeUser.uuid}},{navigateTo:re,respondToRequest:ie}))(pt),mt=a(49),gt=a.n(mt),ht=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).openMenu=function(){a.setState({openMenu:!0})},a.closeMenu=function(){a.setState({openMenu:!1})},a.state={openMenu:!1},a.openMenu=a.openMenu.bind(Object(_.a)(a)),a.closeMenu=a.closeMenu.bind(Object(_.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;void 0===e.friendsRepo[e.targetUser]&&e.fetchUserFriends(e.authToken,e.targetUser,"0")}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.props;n.targetUser!==e.targetUser&&void 0===n.friendsRepo[n.targetUser]&&n.fetchUserFriends(n.authToken,n.targetUser,"0")}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=this.props;if(void 0===a.friendsRepo[a.targetUser])return o.a.createElement("div",null);var n=a.friendsRepo[a.targetUser].friends,i=Object(ct.a)(n),r=i.length;r>9&&(r=9);var s=o.a.createElement(K.a,{onClick:this.openMenu,variant:"contained",className:e.openMenuButton},"See All"),c=o.a.createElement(K.a,{variant:"contained",className:e.seeMoreFriendsButton,onClick:function(){return a.fetchUserFriends(a.authToken,a.targetUser,a.friendsRepo[a.targetUser].pageToken)}},"Show More Friends");return""===a.friendsRepo[a.targetUser].pageToken&&(c=o.a.createElement("div",{style:{height:24}})),o.a.createElement("div",null,o.a.createElement(et.a,{className:e.friendsBox},o.a.createElement(tt.a,{className:e.boxHeader,title:"Friends",action:s}),o.a.createElement(at.a,{className:e.boxContent},o.a.createElement(le.a,{container:!0,spacing:8,direction:"row",justify:"center",alignItems:"center"},i.slice(0,r).map(function(t,a){return o.a.createElement(le.a,{key:a,item:!0,className:e.boxPicItemContainer},o.a.createElement(Ae,{styleOverride:e.boxPicItem,userUuid:t.userUuid,userFirstName:t.firstName,s3ImageUri:t.profilePicUri}))})))),o.a.createElement(Qe.a,{open:t.openMenu,onClose:this.closeMenu},o.a.createElement($e.a,null,a.targetFirstName.charAt(0).toUpperCase()+a.targetFirstName.substring(1)+"'s Friends"),o.a.createElement("div",{"data-simplebar":!0,className:e.scrollable},o.a.createElement(gt.a,null,n.map(function(t,a){return o.a.createElement(ut.a,{key:a,className:e.menuItem},o.a.createElement(dt,{userObject:t,type:t.type}))}))),c))}}]),t}(n.Component),ft=z()(Object(N.withStyles)(function(e){return{friendsBox:{width:300,padding:0},boxPicItemContainer:{width:92,height:92},boxPicItem:{width:88,height:88,borderRadius:0,color:e.palette.secondary.main,backgroundColor:e.palette.primary.main},boxHeader:{paddingTop:12,paddingLeft:16,paddingRight:16,paddingBottom:0},boxContent:{paddingTop:8,paddingLeft:16,paddingRight:16,paddingBottom:8},openMenuButton:{color:e.palette.primary.main,padding:0,textTransform:"none",marginTop:8,marginBottom:8},seeMoreFriendsButton:{color:e.palette.primary.main,padding:0,textTransform:"none"},menuItem:{paddingTop:16,paddingBottom:16,paddingLeft:12,paddingRight:12},scrollable:{width:400,maxHeight:400,padding:0},menuTitle:{color:e.palette.primary.main}}}),Object(M.a)(function(e){return{friendsRepo:e.friendAccess,authToken:e.accountAccess.authToken}},{fetchUserFriends:oe}))(ht),Et=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).editBio=function(){a.state.editingBio?(a.setState({editingBio:!1}),a.stopClickListening()):(a.setState({editingBio:!0}),a.startClickListening())},a.setBioBoxRef=function(e){a.setState({bioBoxRef:e})},a.startClickListening=function(){document.addEventListener("mouseup",a.handleClick,!1)},a.stopClickListening=function(){document.removeEventListener("mouseup",a.handleClick,!1)},a.handleClick=function(e){null!==a.state.bioBoxRef&&(a.state.bioBoxRef.contains(e.target)||(a.setState({editingBio:!1}),a.stopClickListening(),a.props.fetchUserProfile(a.props.targetUser,a.props.authToken)))},a.onChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault(),a.props.saveNewBio(a.props.authToken,a.props.activeUser.uuid,a.state.newBioContent),a.setState({editingBio:!1}),a.stopClickListening()},a.startScrollListening=function(){window.addEventListener("scroll",a.handleScroll,!1)},a.stopScrollListening=function(){window.removeEventListener("scroll",a.handleScroll,!1)},a.handleScroll=function(){window.innerHeight+window.pageYOffset+400>=document.body.offsetHeight&&a.shouldFetch&&void 0!==a.props.postRepo[a.props.targetUser]&&(a.props.fetchUserPosts(a.props.targetUser,a.props.authToken,a.props.postRepo[a.props.targetUser].pageToken),a.shouldFetch=!1)},a.previewProfilePic=function(e){e.target.files.length>0&&a.setState({imageFile:e.target.files[0],imagePreviewUrl:URL.createObjectURL(e.target.files[0])}),a.previewingProfilePic=!0},a.submitProfilePic=function(){var e=a.props,t=a.state.imageFile;e.saveNewProfilePic(t,e.authToken,e.targetUser,e.activeUser.profilePic),a.closeProfilePicPreview()},a.closeProfilePicPreview=function(){a.previewingProfilePic=!1,a.setState({imageFile:null,imagePreviewUrl:""})},a.state={newBioContent:"",editingBio:!1,bioBoxRef:null,imageFile:null,imagePreviewUrl:""},a.shouldFetch=!1,a.previewingProfilePic=!1,a.startScrollListening=a.startScrollListening.bind(Object(_.a)(a)),a.stopScrollListening=a.stopScrollListening.bind(Object(_.a)(a)),a.handleScroll=a.handleScroll.bind(Object(_.a)(a)),a.editBio=a.editBio.bind(Object(_.a)(a)),a.setBioBoxRef=a.setBioBoxRef.bind(Object(_.a)(a)),a.startClickListening=a.startClickListening.bind(Object(_.a)(a)),a.stopClickListening=a.stopClickListening.bind(Object(_.a)(a)),a.onChange=a.onChange.bind(Object(_.a)(a)),a.onSubmit=a.onSubmit.bind(Object(_.a)(a)),a.previewProfilePic=a.previewProfilePic.bind(Object(_.a)(a)),a.submitProfilePic=a.submitProfilePic.bind(Object(_.a)(a)),a.closeProfilePicPreview=a.closeProfilePicPreview.bind(Object(_.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;this.shouldFetch=!0,void 0===e.postRepo[e.targetUser]&&e.fetchUserPosts(e.targetUser,e.authToken,"0"),void 0===e.userProfileRepo[e.targetUser]&&e.fetchUserProfile(e.targetUser,e.authToken),this.startScrollListening()}},{key:"componentWillUnmount",value:function(){this.stopScrollListening()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.postRepo[this.props.targetUser]!==e.postRepo[this.props.targetUser]&&(void 0===e.postRepo[this.props.targetUser]?this.shouldFetch=!0:""===this.props.postRepo[this.props.targetUser].pageToken?this.shouldFetch=!1:this.props.postRepo[this.props.targetUser].pageToken!==e.postRepo[this.props.targetUser].pageToken&&(this.shouldFetch=!0)),this.props.targetUser!==e.targetUser&&(void 0===this.props.postRepo[this.props.targetUser]&&this.props.fetchUserPosts(this.props.targetUser,this.props.authToken,"0"),void 0===this.props.userProfileRepo[this.props.targetUser]&&this.props.fetchUserProfile(this.props.targetUser,this.props.authToken),this.shouldFetch=!0)}},{key:"render",value:function(){var e,t,a=this,n=this.state,i=this.props,r=i.classes,s=i.targetUser,c=i.authToken,l=i.activeUser.uuid,u=i.userProfileRepo[s];if(void 0===u)return o.a.createElement("div",null);void 0===i.postRepo[s]?(e=[],t=""):(e=i.postRepo[s].postObjects,t=i.postRepo[s].pageToken);var p=o.a.createElement(o.a.Fragment,null,e.map(function(e,t){return o.a.createElement(le.a,{key:t,item:!0},o.a.createElement(Ke,{post:e,comments:e.comments,postKey:t,owner:i.targetUser}))}),""===t&&o.a.createElement("div",{style:{minHeight:350}})),d=u.firstName.charAt(0).toUpperCase()+u.firstName.substring(1)+" "+u.lastName.charAt(0).toUpperCase()+u.lastName.substring(1),m=null;switch(u.relationshipStatus){case"newUser":m=o.a.createElement("div",null,o.a.createElement(K.a,{color:"primary",variant:"contained",className:r.addFriendButton,onClick:function(){return i.sendFriendRequest(c,s)}},o.a.createElement(ot.a,{className:r.addFriendIcon}),"Add Friend"));break;case"youRequestedFriendShip":m=o.a.createElement("div",null,o.a.createElement(K.a,{variant:"contained",className:r.greyStyle,onClick:function(e){i.openPopout(e.currentTarget,o.a.createElement(G.a,null,o.a.createElement(ne.a,null,o.a.createElement(st.a,{className:r.popoutButton,onClick:function(){i.deleteFriendRequest(c,l,s)}},"Delete Friend Request"))))}},"Request Sent",o.a.createElement(rt.a,{className:r.dropIcon})));break;case"theyRequestedFriendship":m=o.a.createElement("span",null,o.a.createElement(K.a,{onClick:function(){return i.respondToRequest(c,i.activeUser.uuid,s,"accepted")},className:r.addFriendButton,color:"primary",variant:"contained"},o.a.createElement(ot.a,{className:r.addFriendIcon}),"Add Friend"),o.a.createElement(K.a,{onClick:function(){return i.respondToRequest(c,i.activeUser.uuid,s,"ignored")},className:r.greyStyle,variant:"contained"},"Ignore"));break;case"friends":m=o.a.createElement("div",null,o.a.createElement(K.a,{color:"primary",variant:"contained",className:r.friendsButton,onClick:function(e){i.openPopout(e.currentTarget,o.a.createElement(G.a,null,o.a.createElement(ne.a,null,o.a.createElement(st.a,{className:r.popoutButton,onClick:function(){return i.unfriend(c,s)}},"Unfriend"))))}},"Friends",o.a.createElement(rt.a,{className:r.dropIcon})));break;case"ignored":m=o.a.createElement("div",null,o.a.createElement(K.a,{variant:"contained",className:r.ignoredButton,onClick:function(e){i.openPopout(e.currentTarget,o.a.createElement(G.a,null,o.a.createElement(ne.a,null,o.a.createElement(st.a,{className:r.popoutButton,onClick:function(){return i.respondToRequest(c,i.activeUser.uuid,s,"accepted")}},"Accept Friend Request"))))}},"Ignored",o.a.createElement(rt.a,{className:r.dropIcon})))}var g=o.a.createElement(Ae,{styleOverride:r.profilePicture,userFirstName:u.firstName,userUuid:s,s3ImageUri:u.profilePicUri});s===i.activeUser.uuid&&(g=o.a.createElement("div",null,o.a.createElement("input",{style:{display:"none"},type:"file",name:"postImage",accept:".jpg, .jpeg, .png",onChange:this.previewProfilePic,ref:function(e){return a.fileInput=e}}),o.a.createElement("div",{onClick:function(){return a.fileInput.click()}},o.a.createElement(Ae,{styleOverride:r.profilePicture,userFirstName:u.firstName,userUuid:s,s3ImageUri:u.profilePicUri,clickable:!1,noPicOverrideMessage:"Click here to set a picture"}))),""!==n.imagePreviewUrl&&(g=o.a.createElement(xe.a,{className:r.profilePicture,src:n.imagePreviewUrl})));var h=o.a.createElement("div",null);s===l&&(h=o.a.createElement(K.a,{variant:"contained",className:r.editButtons,onClick:this.editBio},"Edit"));var f=o.a.createElement("div",{ref:this.setBioBoxRef},o.a.createElement(et.a,{className:r.bioBox},o.a.createElement(tt.a,{title:"Bio",action:h}),n.editingBio?o.a.createElement("div",null,o.a.createElement(W.a,{className:r.textField,placeholder:"What's up?",multiline:!0,fullWidth:!0,variant:"outlined",autoFocus:!0,rowsMax:6,maxLength:500,name:"newBioContent",onChange:this.onChange,value:n.newBioContent}),o.a.createElement(le.a,{container:!0,direction:"column",alignContent:"center"},o.a.createElement(K.a,{variant:"contained",className:r.editButtons,onClick:this.onSubmit},"Submit"))):o.a.createElement(at.a,{className:r.textField},u.bio))),E=o.a.createElement(ft,{targetUser:i.targetUser,targetFirstName:u.firstName});return o.a.createElement("div",null,o.a.createElement(Qe.a,{open:this.previewingProfilePic,onClose:this.closeProfilePicPreview},o.a.createElement($e.a,null,"Would you like this as your profile picture?"),o.a.createElement(K.a,{onClick:this.submitProfilePic},"Yes"),o.a.createElement(K.a,{onClick:this.closeProfilePicPreview,color:"primary"},"No")),o.a.createElement(le.a,{item:!0,container:!0,direction:"row",justify:"center",alignItems:"flex-start"},o.a.createElement(le.a,{item:!0,container:!0,spacing:8,className:r.sideColumn,direction:"column",justify:"flex-start",alignItems:"center"},o.a.createElement(le.a,{item:!0},g),o.a.createElement(le.a,{item:!0},f),o.a.createElement(le.a,{item:!0},E)),o.a.createElement(le.a,{item:!0,container:!0,className:r.postsColumn,direction:"column",justify:"flex-start",alignItems:"center"},o.a.createElement(le.a,{item:!0,container:!0,className:r.nameContainer,direction:"row",justify:"center",alignItems:"center"},o.a.createElement(le.a,{item:!0,className:r.profileName},d),o.a.createElement(le.a,{item:!0,xs:!0}),o.a.createElement(le.a,{item:!0},m)),o.a.createElement(Xe,{targetUser:i.targetUser}),p),o.a.createElement(le.a,{item:!0,container:!0,spacing:8,className:r.sideColumn,direction:"column",justify:"flex-start",alignItems:"center"})))}}]),t}(n.Component),vt=z()(Object(N.withStyles)(function(e){return{postsColumn:{width:500},sideColumn:{width:332},nameContainer:{padding:16},profileName:{fontFamily:"PTSansBold",fontSize:32,color:e.palette.primary.main},profilePicture:{width:200,height:200,color:e.palette.secondary.main,backgroundColor:e.palette.primary.main},bioBox:{width:300},photosBox:{width:300,padding:0},friendsBox:{width:300,padding:0},boxPicItemContainer:{width:92,height:92},boxPicItem:{width:88,height:88},boxHeader:{paddingTop:12,paddingLeft:16,paddingRight:16,paddingBottom:0},boxContent:{paddingTop:8,paddingLeft:16,paddingRight:16,paddingBottom:8},addFriendButton:{fontFamily:"PTSansRegular",fontSize:16,color:e.palette.secondary.main,paddingTop:4,paddingBottom:4,paddingLeft:8,paddingRight:8,textTransform:"none"},addFriendIcon:{width:24,height:24,paddingRight:4},friendsButton:{fontFamily:"PTSansRegular",fontSize:16,color:e.palette.secondary.main,paddingTop:4,paddingBottom:4,paddingLeft:8,paddingRight:8,textTransform:"none"},dropIcon:{margin:-4,paddingLeft:4},greyStyle:{fontFamily:"PTSansRegular",fontSize:16,color:e.palette.grey.A400,backgroundColor:e.palette.grey[300],paddingTop:4,paddingBottom:4,paddingLeft:8,paddingRight:8,textTransform:"none"},ignoredButton:{fontFamily:"PTSansRegular",fontSize:16,color:e.palette.grey.A200,backgroundColor:e.palette.grey[300],paddingTop:4,paddingBottom:4,paddingLeft:8,paddingRight:8,textTransform:"none"},popoutButton:{fontFamily:"PTSansRegular",fontSize:16,textColor:e.palette.grey.A400,paddingLeft:8,paddingRight:8,paddingTop:4,paddingBottom:4},editButtons:{color:e.palette.primary.main,padding:0,textTransform:"none",marginTop:8,marginBottom:8},textField:{fontFamily:"PTSansCaptionRegular",fontSize:16}}}),Object(M.a)(function(e){return{authToken:e.accountAccess.authToken,activeUser:e.accountAccess.activeUser,postRepo:e.posts,updatePostTrigger:e.posts.updatePostTrigger,userProfileRepo:e.users}},{saveNewBio:function(e,t,a){return function(n){var o=new Headers;o.append("Authorization",e),o.append("Content-Type","text/plain"),fetch("/users/"+t+"/bio",{method:"POST",headers:o,body:a}).then(function(e){200===e.status&&n({type:"NEW_BIO",payload:{targetUser:t,newBioContent:a}})})}},unfriend:function(e,t){return function(a){var n=new Headers;n.append("Authorization",e),fetch("/users/"+t+"/friends",{method:"DELETE",headers:n}),a({type:"UPDATE_PROFILE_RELATIONSHIP",payload:{targetUser:t,newStatus:"newUser"}})}},sendFriendRequest:function(e,t){return function(a){var n=new Headers;n.append("Authorization",e),fetch("/users/"+t+"/friend-requests",{method:"POST",headers:n}),a({type:"UPDATE_PROFILE_RELATIONSHIP",payload:{targetUser:t,newStatus:"youRequestedFriendShip"}})}},openPopout:se,fetchUserPosts:function(e,t,a){return function(n){if(""!==a&&void 0!==a){var o=new Headers;o.append("Authorization",t),o.append("page_token",a),o.append("page_size",10),fetch("/users/"+e+"/posts",{method:"GET",headers:o}).then(function(t){t.json().then(function(t){var a=t.pop().nextPageToken;n({type:"FETCH_USER_POSTS",payload:{targetUser:e,posts:t,nextPageToken:a}})})})}}},fetchUserProfile:function(e,t){return function(a){var n=new Headers;n.append("Authorization",t),fetch("/users/"+e,{method:"GET",headers:n}).then(function(t){t.json().then(function(t){a({type:"FETCH_USER_PROFILE",payload:{targetUser:e,profileData:t[0]}})})})}},deleteFriendRequest:function(e,t,a){return function(n){var o=new Headers;o.append("Authorization",e),fetch("/users/"+a+"/friend-requests/"+t,{method:"DELETE",headers:o}),n({type:"UPDATE_PROFILE_RELATIONSHIP",payload:{targetUser:a,newStatus:"newUser"}})}},respondToRequest:ie,navigateTo:re,saveNewProfilePic:function(e,t,a,n){return function(o){var i=new FormData;i.append("image",e);var r=new Headers;r.append("Authorization",t),fetch("/users/"+a+"/profile-pic",{method:"POST",body:i,headers:r}).then(function(t){t.text().then(function(t){o({type:"NEW_PROFILE_PIC",payload:{s3ImgUri:t,localImgUrl:URL.createObjectURL(e),targetUser:a,currentProfilePicUri:n}})})})}}}))(Et),bt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).startScrollListening=function(){window.addEventListener("scroll",a.handleScroll,!1)},a.stopScrollListening=function(){window.removeEventListener("scroll",a.handleScroll,!1)},a.handleScroll=function(){window.innerHeight+window.pageYOffset+400>=document.body.offsetHeight&&a.shouldFetch&&(a.props.fetchNewsFeed(a.props.activeUserUuid,a.props.authToken,a.props.newsFeedToken),a.shouldFetch=!1)},a.shouldFetch=!1,a.startScrollListening=a.startScrollListening.bind(Object(_.a)(a)),a.stopScrollListening=a.stopScrollListening.bind(Object(_.a)(a)),a.handleScroll=a.handleScroll.bind(Object(_.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){"0"===this.props.newsFeedToken&&this.props.fetchNewsFeed(this.props.activeUserUuid,this.props.authToken,this.props.newsFeedToken),this.startScrollListening()}},{key:"componentWillUnmount",value:function(){this.stopScrollListening()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.newsFeedToken!==e.newsFeedToken&&(this.shouldFetch=!0)}},{key:"render",value:function(){var e=this.props.classes,t=this.props,a=[];t.newsFeedPostLookup.forEach(function(e){var n=t.postRepo[e.userUuid].postObjects[e.postKey];n.postKey=e.postKey,a.push(n)});var n=o.a.createElement(o.a.Fragment,null,a.map(function(e,t){return o.a.createElement(le.a,{key:t,item:!0},o.a.createElement(Ke,{post:e,comments:e.comments,postKey:e.postKey,owner:e.userUuid}))}),""===t.newsFeedToken&&o.a.createElement("div",{style:{minHeight:350}}));return o.a.createElement("div",{className:e.container},o.a.createElement(le.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-start"},o.a.createElement(le.a,{item:!0,container:!0,spacing:8,className:e.postsColumn,direction:"column",justify:"flex-start",alignItems:"center"},o.a.createElement(Xe,{targetUser:t.activeUserUuid}),n)))}}]),t}(n.Component),yt=z()(Object(N.withStyles)(function(e){return{container:{paddingTop:8},postsColumn:{width:500}}}),Object(M.a)(function(e){return{newsFeedPostLookup:e.posts.newsFeedPostLookup,newsFeedToken:e.posts.newsFeedToken,postRepo:e.posts,updatePostTrigger:e.posts.updatePostTrigger,authToken:e.accountAccess.authToken,activeUserUuid:e.accountAccess.activeUser.uuid}},{fetchNewsFeed:function(e,t,a){return function(n){if(""!==a&&void 0!==a){var o=new Headers;o.append("Authorization",t),o.append("page_token",a),o.append("page_size",10),fetch("/users/"+e+"/newsfeed",{method:"GET",headers:o}).then(function(e){e.json().then(function(e){var t=e.pop().nextPageToken;n({type:"FETCH_NEWS_FEED",payload:{posts:e,nextPageToken:t}})})})}}}}))(bt),Ot=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.props,a=t.postRepo[t.notificationPostLookup.userUuid].postObjects[t.notificationPostLookup.postKey];return o.a.createElement("div",{className:e.container},o.a.createElement(le.a,{container:!0,direction:"row",justify:"center",alignContent:"flex-start"},o.a.createElement(Ke,{post:a,comments:a.comments,owner:a.owner,postKey:t.notificationPostLookup.postKey})))}}]),t}(n.Component),Tt=z()(Object(N.withStyles)(function(e){return{container:{paddingTop:8}}}),Object(M.a)(function(e){return{notificationPostLookup:e.posts.notificationPostLookup,postRepo:e.posts}},null))(Ot),kt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a.display="create_account",a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){switch(this.props.displayPage){case"create_account":this.display=o.a.createElement(X,null);break;case"login":this.props.isLoggedIn?this.display=o.a.createElement(yt,null):this.display=o.a.createElement(ae,null);break;case"home":this.display=o.a.createElement(yt,null);break;case"notificationPost":this.display=o.a.createElement(Tt,null);break;default:this.display=o.a.createElement(vt,{targetUser:this.props.displayPage})}return o.a.createElement("div",null,this.display)}}]),t}(n.Component),Ct=Object(M.a)(function(e){return{displayPage:e.navigation.displayPage,isLoggedIn:e.accountAccess.isLoggedIn}},{})(kt),wt=a(135),jt=a.n(wt),Ut=a(136),Pt=a.n(Ut),St=a(83),Nt=a.n(St),It=a(63),Lt=a.n(It),Ft=a(106),Rt=a.n(Ft),xt=a(306),Bt=a.n(xt),At=a(305),Mt=a.n(At),_t=a(302),Dt=a.n(_t),qt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).logout=function(){a.props.logout(),a.props.navigateTo("login")},a.logout=a.logout.bind(Object(_.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(G.a,{className:this.props.classes.menuBackground},o.a.createElement(gt.a,null,o.a.createElement(ut.a,{onClick:this.logout},"Logout"))))}}]),t}(n.Component),Ht=z()(Object(N.withStyles)(function(e){return{menuBackground:{paddingTop:4,paddingBottom:4,paddingLeft:0,paddingRight:0,maxWidth:200}}}),Object(M.a)(function(e){return{}},{logout:function(){return function(e){e({type:"LOGOUT"})}},navigateTo:re}))(qt),zt=function(e){function t(e){var a;Object(s.a)(this,t),a=Object(l.a)(this,Object(u.a)(t).call(this,e));var n,o=Date.now()-e.notification.when;if(o<18e4)n="Just now";else if(o<3.6*Math.pow(10,6)){n=Math.floor(o/6e4).toString()+" min ago"}else if(o<8.64*Math.pow(10,7)){n=Math.floor(o/(3.6*Math.pow(10,6))).toString()+" hrs ago"}else n=o<1.728*Math.pow(10,8)?"Yesterday":new Date(e.notification.when).toDateString();return a.state={happenedWhen:n},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.notification,n=o.a.createElement(Ae,{s3ImageUri:a.actionUserS3Uri,userFirstName:a.actionUserFirstName}),i=o.a.createElement("span",null,a.actionUserFirstName.charAt(0).toUpperCase()+a.actionUserFirstName.substring(1)),r=o.a.createElement("div",null);switch(a.type){case"wallPost":r=o.a.createElement("div",{className:t.notificationTitle},i,o.a.createElement("span",null," posted on your profile"));break;case"postComment":r=o.a.createElement("div",{className:t.notificationTitle},i,o.a.createElement("span",null," commented on your post"));break;case"postLike":r=o.a.createElement("div",{className:t.notificationTitle},i,o.a.createElement("span",null," liked your post"));break;case"commentLike":r=o.a.createElement("div",{className:t.notificationTitle},i,o.a.createElement("span",null," liked your comment"));break;default:r=o.a.createElement("div",null)}return o.a.createElement("div",{onClick:function(){return e.fetchPost(a.postUuid,a.postOwner,e.authToken)}},o.a.createElement(me.a,{className:t.notification,avatar:n,title:r,subheader:this.state.happenedWhen}))}}]),t}(n.Component),Kt=z()(Object(N.withStyles)(function(e){return{notification:{padding:0,width:450},notificationTitle:{fontSize:18,color:e.palette.primary.main},avatar:{color:e.palette.secondary,backgroundColor:e.palette.primary}}}),Object(M.a)(function(e){return{activeUserUuid:e.accountAccess.activeUser.uuid,authToken:e.accountAccess.authToken}},{fetchPost:function(e,t,a){return function(n){var o=new Headers;o.append("Authorization",a),fetch("/users/"+t+"/posts/"+e,{method:"GET",headers:o}).then(function(e){e.json().then(function(e){n({type:"FETCH_POST",payload:e})})})}}}))(zt),Wt=a(303),Gt=a(151),Vt=a.n(Gt),Jt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).fetchNotifications=function(){var e=a.props;a.waitForTrigger=!0,a.waitToRender=!0,e.fetchNotifications(e.authToken,e.activeUserUuid,e.notificationsPageToken)},a.state={trigger:!1},a.waitToRender=0===e.notifications.length&&""!==e.notificationsPageToken,a.waitForTrigger=!1,a.fetchNotifications=a.fetchNotifications.bind(Object(_.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;0===e.notifications.length&&""!==e.notificationsPageToken&&e.fetchNotifications(e.authToken,e.activeUserUuid,e.notificationsPageToken)}},{key:"componentDidUpdate",value:function(e,t,a){this.waitForTrigger&&(this.waitForTrigger=!1,this.setState({trigger:!this.state.trigger}))}},{key:"render",value:function(){var e,t=this.props,a=t.classes;return this.waitToRender?(this.waitToRender=!1,o.a.createElement(G.a,{className:a.menuBackground})):(e=0===t.notifications.length?o.a.createElement(tt.a,{avatar:o.a.createElement(Wt.a,{className:a.avatar,children:o.a.createElement(Vt.a,{style:{width:32,height:32}})}),title:o.a.createElement("div",{className:a.title},"No notifications"),subheader:o.a.createElement("div",{className:a.subheader},"so far...")}):o.a.createElement(gt.a,{"data-simplebar":!0,className:a.scrollable},t.notifications.map(function(e,t){return o.a.createElement(ut.a,{key:t,className:a.menuItem},o.a.createElement(Kt,{notification:e}))}),""!==t.notificationsPageToken&&o.a.createElement(le.a,{item:!0,container:!0,direction:"row",justify:"center",className:a.loadMoreNotificationsButton,onClick:this.fetchNotifications},"Load More Notifications")),o.a.createElement(G.a,{className:a.menuBackground},e))}}]),t}(n.Component),Yt=z()(Object(N.withStyles)(function(e){return{menuBackground:{width:450,maxHeight:400},menuItem:{paddingTop:20,paddingBottom:20},scrollable:{width:450,maxHeight:400,paddingTop:8,paddingBottom:8,paddingLeft:0,paddingRight:0},loadMoreNotificationsButton:{cursor:"pointer",fontFamily:"PTSansCaptionBold",fontSize:14,color:e.palette.primary[500],paddingTop:4,paddingBottom:4},title:{cursor:"pointer",paddingTop:0,marginBottom:-4,fontFamily:"PTSansCaptionBold",fontSize:16,color:e.palette.grey[500]},subheader:{fontFamily:"PTSanseCaptionRegular",fontSize:16,marginTop:-6,color:e.palette.primary.main},avatar:{color:e.palette.primary.main,backgroundColor:e.palette.grey[500],marginRight:-8}}}),Object(M.a)(function(e){return{notifications:e.accountAccess.notifications,notificationsPageToken:e.accountAccess.notificationsPageToken,activeUserUuid:e.accountAccess.activeUser.uuid,authToken:e.accountAccess.authToken}},{fetchNotifications:function(e,t,a){return function(n){if(""!==a){var o=new Headers;o.append("Authorization",e),o.append("page_token",a),o.append("page_size",10),fetch("/users/"+t+"/notifications",{method:"GET",headers:o}).then(function(e){e.json().then(function(e){var t=e.pop().nextPageToken;n({type:"FETCH_NOTIFICATIONS",payload:{nextPageToken:t,notifications:e}})})})}}}}))(Jt),Qt=a(304),$t=a.n(Qt),Zt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.onSubmit=function(){a.state.text.length<1||a.props.searchUsers(a.state.text,a.props.authToken)},a.state={text:""},a.input=null,a.onChange=a.onChange.bind(Object(_.a)(a)),a.onSubmit=a.onSubmit.bind(Object(_.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.input=document.getElementById("userSearch"),this.input.addEventListener("keyup",function(t){"Enter"===t.code&&e.onSubmit()})}},{key:"componentWillUnmount",value:function(){var e=this;this.input.removeEventListener("keyup",function(t){"Enter"===t.code&&e.onSubmit()})}},{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.componentContainer},o.a.createElement(le.a,{container:!0,direction:"row",alignItems:"center",justify:"center"},o.a.createElement(le.a,{xs:!0,item:!0},o.a.createElement(Pe.a,{className:e.textField,placeholder:"Search by email or name",multiline:!1,fullWidth:!0,autoComplete:"off",name:"text",onChange:this.onChange,value:this.state.text,id:"userSearch"})),o.a.createElement(le.a,{item:!0},o.a.createElement(K.a,{onClick:this.onSubmit,disableRipple:!0,color:"primary"},o.a.createElement($t.a,null)))))}}]),t}(n.Component),Xt=z()(Object(N.withStyles)(function(e){return{componentContainer:{width:400},textField:{paddingLeft:16,fontFamily:"PTSansRegular",fontSize:16,color:e.palette.primary.main}}}),Object(M.a)(function(e){return{authToken:e.accountAccess.authToken}},{searchUsers:function(e,t){return function(a){var n=new Headers;n.append("Authorization",t),n.append("searchText",e),36===e.length?n.append("searchBy","uuid"):/^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())&&e.length<200?n.append("searchBy","email"):n.append("searchBy","name"),fetch("/users/search",{method:"GET",headers:n}).then(function(e){e.json().then(function(e){a({type:"USER_SEARCH",payload:e})})})}}}))(Zt),ea=a(108),ta=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={userSearchResults:[]},a.waitToRender=!1,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;"0"===e.requestPageToken&&e.fetchFriendRequests(e.authToken,e.activeUserUuid,"0"),void 0===e.friendRepo[e.activeUserUuid]&&e.fetchUserFriends(e.authToken,e.activeUserUuid,"0")}},{key:"componentDidUpdate",value:function(e,t,a){this.props.userSearchResults!==e.userSearchResults&&this.setState({userSearchResults:this.props.userSearchResults})}},{key:"render",value:function(){if(this.waitToRender)return this.waitToRender=!1,o.a.createElement("div",null);var e=this.props,t=e.classes,a=this.state.userSearchResults,n=e.friendRequests,i=null;a.length>0&&(this.waitToRender=!0,i=o.a.createElement(gt.a,{"data-simplebar":!0,className:t.scrollable},a.map(function(e,a){return o.a.createElement(ut.a,{key:a,className:t.menuItem},o.a.createElement(dt,{userObject:e,type:"search"}))})));var r=null;return r=n.length>0?o.a.createElement(gt.a,{"data-simplebar":!0,className:t.scrollable},n.map(function(e,a){return o.a.createElement(ut.a,{key:a,className:t.menuItem},o.a.createElement(dt,{userObject:e,type:e.type,requestKey:a}))})):o.a.createElement(tt.a,{avatar:o.a.createElement(Wt.a,{className:t.avatar,children:o.a.createElement(Vt.a,{style:{width:32,height:32}})}),title:o.a.createElement("div",{className:t.title},"No new friend requests"),subheader:o.a.createElement("div",{className:t.subheader},"yet...")}),o.a.createElement(o.a.Fragment,null,o.a.createElement(G.a,{className:t.menuBackground},o.a.createElement(le.a,{container:!0,direction:"column",justify:"flex-start",alignContent:"flex-start"},o.a.createElement("div",{className:t.sectionTitle},"Lookup Users"),o.a.createElement(ea.a,null),o.a.createElement(Xt,null),i,o.a.createElement(ea.a,null),o.a.createElement("div",{className:t.sectionTitle},"Friend Requests"),o.a.createElement(ea.a,null),r,o.a.createElement(ea.a,null))))}}]),t}(n.Component),aa=z()(Object(N.withStyles)(function(e){return{menuBackground:{paddingTop:0,paddingBottom:8,paddingLeft:0,paddingRight:0,width:400},menuItem:{paddingTop:16,paddingBottom:16,paddingLeft:12,paddingRight:12},scrollable:{width:400,maxHeight:400,padding:0},sectionTitle:{paddingTop:4,paddingBottom:4,paddingLeft:16,fontFamily:"PTSansCaptionRegular",fontSize:14,color:e.palette.primary.main},title:{cursor:"pointer",paddingTop:0,marginBottom:-4,fontFamily:"PTSansCaptionBold",fontSize:16,color:e.palette.grey[500]},subheader:{fontFamily:"PTSanseCaptionRegular",fontSize:16,marginTop:-6,color:e.palette.primary.main},avatar:{color:e.palette.primary.main,backgroundColor:e.palette.grey[500],marginRight:-8}}}),Object(M.a)(function(e){return{friendRequests:e.friendAccess.friendRequests,requestPageToken:e.friendAccess.requestPageToken,userSearchResults:e.users.userSearchResults,authToken:e.accountAccess.authToken,activeUserUuid:e.accountAccess.activeUser.uuid,updateTrigger:e.friendAccess.friendsMenuTrigger,friendRepo:e.friendAccess}},{fetchFriendRequests:function(e,t,a){return function(n){if(""!==a){var o=new Headers;o.append("Authorization",e),o.append("page_token",a),o.append("page_size",10),fetch("/users/"+t+"/friend-requests",{method:"GET",headers:o}).then(function(e){return e.json().then(function(e){var t=e.pop().nextPageToken;n({type:"FETCH_FRIEND_REQUESTS",payload:{nextPageToken:t,friendRequests:e}})})})}}},fetchUserFriends:oe}))(ta),na={headerStyles:{minWidth:500,maxWidth:1100,padding:0},logoButton:{width:200,borderRadius:16,padding:8},dropIcon:{padding:0,margin:5,backgroundColor:"transparent"},icon:{margin:5},chatIcon:{width:24,height:22,marginBottom:1,marginTop:1},userFirstName:{paddingLeft:5},homeButton:{height:45,margin:5,paddingLeft:10,paddingRight:10},userAvatar:{maxWidth:30,maxHeight:30,color:R.a[500],backgroundColor:L.a[500]}},oa=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).openFriendsFinder=function(e){a.props.openPopout(e.currentTarget,o.a.createElement(aa,null),80),a.setState({numOfNewFriendRequests:0})},a.openNotifications=function(e){a.props.openPopout(e.currentTarget,o.a.createElement(Yt,null),33),a.setState({numOfNewNotifications:0})},a.goHome=function(){a.props.isLoggedIn?a.props.navigateTo("home"):a.props.navigateTo("login")},a.state={userFirstName:"",loggedIn:!1,numOfNewFriendRequests:0,numOfNewNotifications:0},a.intervalVar=null,a.openFriendsFinder=a.openFriendsFinder.bind(Object(_.a)(a)),a.openNotifications=a.openNotifications.bind(Object(_.a)(a)),a.goHome=a.goHome.bind(Object(_.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=this.props;e.accountCreated!==n.accountCreated&&n.accountCreated&&n.navigateTo("login"),e.isLoggedIn!==n.isLoggedIn&&(n.isLoggedIn?(this.setState({loggedIn:!0,userFirstName:this.props.activeUser.firstName}),n.navigateTo(n.activeUser.uuid),n.updateActiveUser(n.authToken,n.activeUser.uuid),this.intervalVar=setInterval(function(){return n.updateActiveUser(n.authToken,n.activeUser.uuid)},6e4)):(this.setState({loggedIn:!1},function(){n.navigateTo("login")}),null!==this.intervalVar&&(clearInterval(this.intervalVar),this.intervalVar=null))),n.updates!==e.updates&&(void 0!==n.updates.numOfNewFriendRequests?this.setState({numOfNewFriendRequests:this.props.updates.numOfNewFriendRequests,numOfNewNotifications:this.props.updates.numOfNewNotifications}):this.setState({numOfNewFriendRequests:0,numOfNewNotifications:0}))}},{key:"render",value:function(){var e=this.state,t=this.props,a=o.a.createElement(o.a.Fragment,null,o.a.createElement(le.a,{item:!0,container:!0,xs:3,justify:"flex-end",alignItems:"center"},o.a.createElement(Lt.a,{onClick:function(){t.navigateTo("login")},size:"medium",color:"inherit"},"Login")),o.a.createElement(le.a,{item:!0,container:!0,xs:3,justify:"flex-start",alignItems:"center"},o.a.createElement(Lt.a,{onClick:function(){t.navigateTo("create_account")},size:"medium",color:"inherit"},"Join"))),n=o.a.createElement("div",null);return null!==t.activeUser&&(n=o.a.createElement(o.a.Fragment,null,o.a.createElement(le.a,{item:!0,container:!0,xs:3,justify:"flex-end",alignItems:"center"},o.a.createElement(le.a,{item:!0},o.a.createElement(Lt.a,{onClick:function(){t.navigateTo(t.activeUser.uuid)},style:na.homeButton,color:"inherit"},o.a.createElement(Ae,{s3ImageUri:t.activeUser.profilePic,userFirstName:t.activeUser.firstName,styleOverride:t.classes.userAvatar,noButton:!0}),o.a.createElement(Nt.a,{style:na.userFirstName,color:"inherit"},e.userFirstName)),o.a.createElement(Lt.a,{onClick:function(){t.navigateTo("home")},style:na.homeButton,size:"medium",color:"inherit"},o.a.createElement(Nt.a,{color:"inherit"},"Home")))),o.a.createElement(le.a,{item:!0,container:!0,xs:3,justify:"flex-start",alignItems:"center"},o.a.createElement(le.a,{item:!0},o.a.createElement(be.a,{onClick:this.openFriendsFinder,style:na.icon,color:"inherit"},o.a.createElement(Rt.a,{badgeContent:e.numOfNewFriendRequests,color:"secondary"},o.a.createElement(Mt.a,null)))),o.a.createElement(le.a,{item:!0},o.a.createElement(be.a,{onClick:this.openNotifications,style:na.icon,color:"inherit"},o.a.createElement(Rt.a,{badgeContent:e.numOfNewNotifications,color:"secondary"},o.a.createElement(Bt.a,null)))),o.a.createElement(le.a,{item:!0},o.a.createElement(be.a,{onClick:function(e){t.openPopout(e.currentTarget,o.a.createElement(Ht,null))},style:na.dropIcon,color:"secondary"},o.a.createElement(rt.a,null)))))),o.a.createElement("div",null,o.a.createElement(jt.a,null,o.a.createElement(Pt.a,null,o.a.createElement(le.a,{item:!0,container:!0,direction:"row",justify:"center",alignItems:"center"},o.a.createElement(le.a,{item:!0,container:!0,spacing:0,style:na.headerStyles,direction:"row",justify:"center",alignItems:"center"},o.a.createElement(le.a,{item:!0,xs:!0,x1:2}),o.a.createElement(le.a,{item:!0,xs:2},o.a.createElement(be.a,{onClick:this.goHome,style:na.logoButton},o.a.createElement("img",{src:Dt.a,alt:"Logo"}))),o.a.createElement(le.a,{item:!0,xs:!0,x1:2}),e.loggedIn?n:a)))))}}]),t}(n.Component),ia=z()(Object(N.withStyles)(na),Object(d.b)(function(e){return{accountCreated:e.accountAccess.accountCreated,isLoggedIn:e.accountAccess.isLoggedIn,authToken:e.accountAccess.authToken,activeUser:e.accountAccess.activeUser,updates:e.accountAccess.updates}},{updateActiveUser:function(e,t){return function(a){var n=new Headers;n.append("Authorization",e),fetch("/users/"+t+"/update",{method:"GET",headers:n}).then(function(e){return e.json().then(function(e){a({type:"UPDATE",payload:e})})})}},navigateTo:re,openPopout:se}))(oa),ra=a(137),sa=a.n(ra),ca=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).setArrowRef=function(e){a.setState({arrowRef:e})},a.setPopoutRef=function(e){a.setState({popoutRef:e})},a.startClickListening=function(){document.addEventListener("mouseup",a.handleClick,!1)},a.stopClickListening=function(){document.removeEventListener("mouseup",a.handleClick,!1)},a.handleClick=function(e){a.state.popoutRef.contains(e.target)||a.anchorEl.contains(e.target)||(a.open=!1,a.setState({trigger:!a.state.trigger}))},a.state={trigger:!1,popoutRef:null,arrowRef:null},a.open=!1,a.anchorEl=null,a.content=null,a.offset=0,a.setArrowRef=a.setArrowRef.bind(Object(_.a)(a)),a.setPopoutRef=a.setPopoutRef.bind(Object(_.a)(a)),a.startClickListening=a.startClickListening.bind(Object(_.a)(a)),a.stopClickListening=a.stopClickListening.bind(Object(_.a)(a)),a.handleClick=a.handleClick.bind(Object(_.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){e.trigger!==this.props.trigger&&(this.anchorEl===this.props.anchorEl?this.open=!this.open:this.open=!0,this.anchorEl=this.props.anchorEl,this.content=this.props.content,this.offset=this.props.offset,this.setState({trigger:!this.state.trigger})),this.open&&e.displayPage!==this.props.displayPage&&(this.open=!1,this.setState({trigger:!this.state.trigger})),this.props.isLoggedIn||(this.open=!1,this.anchorEl=null,this.content=null,this.offset=0)}},{key:"render",value:function(){var e=this.props.classes;return this.open?this.startClickListening():this.stopClickListening(),o.a.createElement("div",{ref:this.setPopoutRef},o.a.createElement(sa.a,{open:this.open,anchorEl:this.anchorEl,placement:"bottom-end",disablePortal:!0,className:e.popper,modifiers:{preventOverflow:{enabled:!0,boundariesElement:"scrollParent"},arrow:{enabled:!0,element:this.state.arrowRef},offset:{enabled:!0,offset:this.offset}}},o.a.createElement("span",{className:e.arrow,ref:this.setArrowRef}),this.content))}}]),t}(o.a.Component),la=z()(Object(N.withStyles)(function(e){return{popper:{zIndex:1200,'&[x-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.9em",width:"3em",height:"1em","&::before":{borderWidth:"0 1em 1em 1em",borderColor:"transparent transparent #ffffff transparent"}},'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.9em",width:"3em",height:"1em","&::before":{borderWidth:"1em 1em 0 1em",borderColor:"#ffffff transparent transparent transparent"}},'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.9em",height:"3em",width:"1em","&::before":{borderWidth:"1em 1em 1em 0",borderColor:"transparent #ffffff transparent transparent"}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.9em",height:"3em",width:"1em","&::before":{borderWidth:"1em 0 1em 1em",borderColor:"transparent transparent transparent #ffffff"}}},arrow:{position:"absolute",fontSize:8,width:"3em",height:"3em","&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}}}}),Object(M.a)(function(e){return{anchorEl:e.popout.anchorElement,content:e.popout.content,offset:e.popout.offset,trigger:e.popout.trigger,displayPage:e.navigation.displayPage,isLoggedIn:e.accountAccess.isLoggedIn}},null))(ca),ua=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).fetching={},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=this.props;if(n.requestCounterTrigger!==e.requestCounterTrigger&&n.requestedImages.length>0)for(;n.requestedImages.length>0;){var o=n.requestedImages.shift();void 0===this.fetching[o.uri]&&(this.fetching[o.uri]=!0,n.fetchImage(o.uri,n.authToken,o.type))}n.isLoggedIn||(this.fetching={})}},{key:"render",value:function(){return o.a.createElement("div",null)}}]),t}(n.Component),pa=Object(M.a)(function(e){return{requestedImages:e.images.requestedImages,requestCounterTrigger:e.images.requestCounterTrigger,authToken:e.accountAccess.authToken,isLoggedIn:e.accountAccess.isLoggedIn}},{fetchImage:Le})(ua),da=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(d.a,{store:S},o.a.createElement(N.MuiThemeProvider,{theme:x},o.a.createElement(A.a,null),o.a.createElement("div",{className:"App"},o.a.createElement(ia,null),o.a.createElement("div",{className:this.props.classes.headerMargin}),o.a.createElement(Ct,null),o.a.createElement(la,null),o.a.createElement(pa,null))))}}]),t}(n.Component),ma=Object(N.withStyles)(function(e){return{headerMargin:{marginTop:70},backgroundColor:e.palette.background}})(da);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(ma,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[398,1,2]]]);
//# sourceMappingURL=main.a6841fd6.chunk.js.map